<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>26.4. unittest — ユニットテストフレームワーク &#8212; Python 3.6.1 ドキュメント</title>
    
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.6.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Python 3.6.1 ドキュメント 内を検索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Python 3.6.1 ドキュメント" href="../contents.html" />
    <link rel="up" title="26. 開発ツール" href="development.html" />
    <link rel="next" title="26.5. unittest.mock — モックオブジェクトライブラリ" href="unittest.mock.html" />
    <link rel="prev" title="26.3. doctest — 対話的な実行例をテストする" href="doctest.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    <link rel="canonical" href="https://docs.python.jp/3/library/unittest.html" /><script type="text/javascript">
    $(document).ready(function() {
      var base = 'https://docs.python.org/3.6/library/unittest.html';
      $('a.headerlink').each(function() {
        var html = '<a href="' + base + $(this).attr('href') +
                   '" title="原文へのリンク"><small>(原文)</small></a>';
        $(this).after(html);
      })
    });
    </script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="../_static/version_switch.js"></script>
    
    
 

  </head>
  <body role="document">  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="unittest.mock.html" title="26.5. unittest.mock — モックオブジェクトライブラリ"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="doctest.html" title="26.3. doctest — 対話的な実行例をテストする"
             accesskey="P">前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="https://www.python.org/">Python</a> &#187;</li>
        <li>
          <span class="version_switcher_placeholder">3.6.1</span>
          <a href="../index.html">ドキュメント</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 標準ライブラリ</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="development.html" accesskey="U">26. 開発ツール</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-unittest">
<span id="unittest-unit-testing-framework"></span><h1>26.4. <a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> &#8212; ユニットテストフレームワーク<a class="headerlink" href="#module-unittest" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p><strong>ソースコード:</strong> <a class="reference external" href="https://github.com/python/cpython/tree/3.6/Lib/unittest/__init__.py">Lib/unittest/__init__.py</a></p>
<hr class="docutils" />
<p>(すでにテストの基本概念について詳しいようでしたら、この部分をとばして <a class="reference internal" href="#assert-methods"><span class="std std-ref">アサートメソッド一覧</span></a> に進むと良いでしょう。)</p>
<p><a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> ユニットテストフレームワークは元々 JUnit に触発されたもので、
他の言語の主要なユニットテストフレームワークと同じような感じです。
テストの自動化、テスト用のセットアップやシャットダウンのコードの共有、テストのコレクション化、そして報告フレームワークからのテストの独立性をサポートしています。</p>
<p>これを実現するために、 <a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> はいくつかの重要な概念をオブジェクト指向の方法でサポートしています:</p>
<dl class="docutils">
<dt>テストフィクスチャ (test fixture)</dt>
<dd><p class="first last">テストフィクスチャ (<em class="dfn">test fixture</em>) とは、テスト実行のために必要な準備や終了処理を指します。例: テスト用データベースの作成・ディレクトリ・サーバプロセスの起動など。</p>
</dd>
<dt>テストケース (test case)</dt>
<dd><p class="first last">テストケース (<em class="dfn">test case</em>) はテストの独立した単位で、各入力に対する結果をチェックします。テストケースを作成する場合は、 <a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> が提供する <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> クラスを基底クラスとして利用することができます。</p>
</dd>
<dt>テストスイート (test suite)</dt>
<dd><p class="first last">テストスイート (<em class="dfn">test suite</em>) はテストケースとテストスイートの集まりで、同時に実行しなければならないテストをまとめる場合に使用します。</p>
</dd>
<dt>テストランナー (test runner)</dt>
<dd><p class="first last">テストランナー (<em class="dfn">test runner</em>) はテストの実行を管理し結果を提供する要素です。ランナーはグラフィカルインターフェースやテキストインターフェースを使用しても構いませんし、テストの実行結果を示す特別な値を返しても構いません。</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="docutils">
<dt><a class="reference internal" href="doctest.html#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal"><span class="pre">doctest</span></code></a> モジュール</dt>
<dd><p class="first last">テストをサポートするもうひとつのモジュールで、このモジュールとは趣きがだいぶ異なります。</p>
</dd>
<dt><a class="reference external" href="https://web.archive.org/web/20150315073817/http://www.xprogramming.com/testfram.htm">Simple Smalltalk Testing: With Patterns</a></dt>
<dd><p class="first last">Kent Beck のテスティングフレームワークに関する原論文で、ここに記載されたパターンを <a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> が使用しています。</p>
</dd>
<dt><a class="reference external" href="https://nose.readthedocs.org/en/latest/">Nose</a> と <a class="reference external" href="http://pytest.org">py.test</a></dt>
<dd><p class="first last">サードパーティのユニットテストフレームワークでより軽量な構文でテストを書くことができます。例えば、<code class="docutils literal"><span class="pre">assert</span> <span class="pre">func(10)</span> <span class="pre">==</span> <span class="pre">42</span></code>  のように書きます。</p>
</dd>
<dt><a class="reference external" href="https://wiki.python.org/moin/PythonTestingToolsTaxonomy">The Python Testing Tools Taxonomy</a></dt>
<dd><p class="first last">多くの Python のテストツールが一覧で紹介されています。ファンクショナルテストのフレームワークやモックライブラリも掲載されています。</p>
</dd>
<dt><a class="reference external" href="http://lists.idyll.org/listinfo/testing-in-python">Testing in Python メーリングリスト</a></dt>
<dd><p class="first last">Python でテストやテストツールについての議論に特化したグループです。</p>
</dd>
</dl>
<p class="last">Python のソースコード配布物にあるスクリプト <code class="file docutils literal"><span class="pre">Tools/unittestgui/unittestgui.py</span></code> はテストディスカバリとテスト実行のための GUI ツールです。
主な目的は単体テストの初心者が簡単に使えるようにすることです。
実際の生産環境では、 <a class="reference external" href="https://buildbot.net/">Buildbot</a> 、 <a class="reference external" href="https://jenkins.io/">Jenkins</a> 、 <a class="reference external" href="http://hudson-ci.org/">Hudson</a> のような継続的インテグレーションシステムでテストを実行することを推奨します。</p>
</div>
<div class="section" id="basic-example">
<span id="unittest-minimal-example"></span><h2>26.4.1. 基本的な例<a class="headerlink" href="#basic-example" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> モジュールには、テストの開発や実行の為の優れたツールが用意されており、この節では、その一部を紹介します。ほとんどのユーザとっては、ここで紹介するツールだけで十分でしょう。</p>
<p>以下は、三つの文字列メソッドをテストするスクリプトです:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unittest</span>

<span class="k">class</span> <span class="nc">TestStringMethods</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="s1">&#39;FOO&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_isupper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;FOO&#39;</span><span class="o">.</span><span class="n">isupper</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="o">.</span><span class="n">isupper</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">test_split</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;hello world&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(),</span> <span class="p">[</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">])</span>
        <span class="c1"># check that s.split fails when the separator is not a string</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
            <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>テストケースは、 <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">unittest.TestCase</span></code></a> のサブクラスとして作成します。メソッド名が <code class="docutils literal"><span class="pre">test</span></code> で始まる三つのメソッドがテストです。テストランナーはこの命名規約によってテストを行うメソッドを検索します。</p>
<p>これらのテスト内では、予定の結果が得られていることを確かめるために <a class="reference internal" href="#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertEqual()</span></code></a> を、条件のチェックに <a class="reference internal" href="#unittest.TestCase.assertTrue" title="unittest.TestCase.assertTrue"><code class="xref py py-meth docutils literal"><span class="pre">assertTrue()</span></code></a> や <a class="reference internal" href="#unittest.TestCase.assertFalse" title="unittest.TestCase.assertFalse"><code class="xref py py-meth docutils literal"><span class="pre">assertFalse()</span></code></a> を、例外が発生する事を確認するために <a class="reference internal" href="#unittest.TestCase.assertRaises" title="unittest.TestCase.assertRaises"><code class="xref py py-meth docutils literal"><span class="pre">assertRaises()</span></code></a> をそれぞれ呼び出しています。 <a class="reference internal" href="../reference/simple_stmts.html#assert"><code class="xref std std-keyword docutils literal"><span class="pre">assert</span></code></a> 文の代わりにこれらのメソッドを使用すると、テストランナーでテスト結果を集計してレポートを作成する事ができます。</p>
<p><a class="reference internal" href="#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal"><span class="pre">setUp()</span></code></a> および <a class="reference internal" href="#unittest.TestCase.tearDown" title="unittest.TestCase.tearDown"><code class="xref py py-meth docutils literal"><span class="pre">tearDown()</span></code></a> メソッドによって各テストメソッドの前後に実行する命令を実装することが出来ます。
詳細は <a class="reference internal" href="#organizing-tests"><span class="std std-ref">テストコードの構成</span></a> を参照してください。</p>
<p>最後のブロックは簡単なテストの実行方法を示しています。 <a class="reference internal" href="#unittest.main" title="unittest.main"><code class="xref py py-func docutils literal"><span class="pre">unittest.main()</span></code></a> は、テストスクリプトのコマンドライン用インターフェースを提供します。コマンドラインから起動された場合、上記のスクリプトは以下のような結果を出力します:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="o">----------------------------------------------------------------------</span>
<span class="n">Ran</span> <span class="mi">3</span> <span class="n">tests</span> <span class="ow">in</span> <span class="mf">0.000</span><span class="n">s</span>

<span class="n">OK</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">-v</span></code> オプションをテストスクリプトに渡すことで <a class="reference internal" href="#unittest.main" title="unittest.main"><code class="xref py py-func docutils literal"><span class="pre">unittest.main()</span></code></a> はより冗長になり、以下のような出力をします:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">test_isupper</span> <span class="p">(</span><span class="n">__main__</span><span class="o">.</span><span class="n">TestStringMethods</span><span class="p">)</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">test_split</span> <span class="p">(</span><span class="n">__main__</span><span class="o">.</span><span class="n">TestStringMethods</span><span class="p">)</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">test_upper</span> <span class="p">(</span><span class="n">__main__</span><span class="o">.</span><span class="n">TestStringMethods</span><span class="p">)</span> <span class="o">...</span> <span class="n">ok</span>

<span class="o">----------------------------------------------------------------------</span>
<span class="n">Ran</span> <span class="mi">3</span> <span class="n">tests</span> <span class="ow">in</span> <span class="mf">0.001</span><span class="n">s</span>

<span class="n">OK</span>
</pre></div>
</div>
<p>上の例が <a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> モジュールで最もよく使われる機能で、ほとんどのテストではこれで十分です。以下では全ての機能を一から解説しています。</p>
</div>
<div class="section" id="command-line-interface">
<span id="unittest-command-line-interface"></span><h2>26.4.2. コマンドラインインターフェイス<a class="headerlink" href="#command-line-interface" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>ユニットテストモジュールはコマンドラインから使って、モジュール、クラス、あるいは個別のテストメソッドで定義されたテストを実行することが出来ます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">test_module1</span> <span class="n">test_module2</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">test_module</span><span class="o">.</span><span class="n">TestClass</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">test_module</span><span class="o">.</span><span class="n">TestClass</span><span class="o">.</span><span class="n">test_method</span>
</pre></div>
</div>
<p>モジュール名ならびに完全修飾されたクラス名やメソッド名の任意の組み合わせを一覧で渡すことが出来ます。</p>
<p>テストモジュールはファイルパスで指定することも出来ます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_something</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>そのため、テストモジュールを指定するのにシェルのファイル名補完が使えます。指定されたファイルはやはりモジュールとしてインポート可能でなければなりません。パスから &#8216;.py&#8217; を取り除き、パスセパレータを &#8216;.&#8217; に置き換えることでモジュール名に変換されます。モジュールとしてインポート可能でないテストファイルを実行したい場合は、代わりにそのファイルを直接実行するのが良いでしょう。</p>
<p>テスト実行時に (より冗長な) 詳細を表示するには -v フラグを渡します:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="o">-</span><span class="n">v</span> <span class="n">test_module</span>
</pre></div>
</div>
<p>引数無しで実行すると <a class="reference internal" href="#unittest-test-discovery"><span class="std std-ref">テストディスカバリ</span></a> が開始されます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span>
</pre></div>
</div>
<p>コマンドラインプションの一覧を表示するには以下のコマンドを実行します:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="o">-</span><span class="n">h</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.2 で変更: </span>以前のバージョンでは、個々のテストメソッドしか実行することができず、モジュール単位やクラス単位で実行することは不可能でした。</p>
</div>
<div class="section" id="command-line-options">
<h3>26.4.2.1. コマンドラインオプション<a class="headerlink" href="#command-line-options" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong class="program">unittest</strong> には以下のコマンドラインオプションがあります:</p>
<dl class="cmdoption">
<dt id="cmdoption-unittest-b">
<span id="cmdoption-unittest--buffer"></span><code class="descname">-b</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--buffer</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-unittest-b" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>標準出力と標準エラーのストリームをテストの実行中にバッファします。テストが成功している間は結果の出力は破棄されます。テストの失敗やエラーの場合、出力は通常通り表示され、エラーメッセージに追加されます。</p>
</dd></dl>

<dl class="cmdoption">
<dt id="cmdoption-unittest-c">
<span id="cmdoption-unittest--catch"></span><code class="descname">-c</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--catch</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-unittest-c" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><code class="kbd docutils literal"><span class="pre">Control-C</span></code> を実行中のテストが終了するまで遅延させ、そこまでの結果を出力します。二回目の <code class="kbd docutils literal"><span class="pre">Control-C</span></code> は、通常通り <a class="reference internal" href="exceptions.html#KeyboardInterrupt" title="KeyboardInterrupt"><code class="xref py py-exc docutils literal"><span class="pre">KeyboardInterrupt</span></code></a> の例外を発生させます。</p>
<p>この機能の仕組みについては、<a class="reference internal" href="#signal-handling">シグナルハンドリング</a> を参照してください。</p>
</dd></dl>

<dl class="cmdoption">
<dt id="cmdoption-unittest-f">
<span id="cmdoption-unittest--failfast"></span><code class="descname">-f</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--failfast</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-unittest-f" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>初回のエラーもしくは失敗の時にテストを停止します。</p>
</dd></dl>

<dl class="cmdoption">
<dt id="cmdoption-unittest--locals">
<code class="descname">--locals</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-unittest--locals" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>トレースバック内の局所変数を表示します。</p>
</dd></dl>

<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加: </span>コマンドラインオプションの <code class="docutils literal"><span class="pre">-b</span></code>、<code class="docutils literal"><span class="pre">-c</span></code>、<code class="docutils literal"><span class="pre">-f</span></code> が追加されました。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.5 で追加: </span>コマンドラインオプション <code class="docutils literal"><span class="pre">--locals</span></code>。</p>
</div>
<p>コマンドラインによってテストディスカバリ、すなわちプロジェクトの全テストを実行したりサブセットのみを実行したりすることも出来ます。</p>
</div>
</div>
<div class="section" id="test-discovery">
<span id="unittest-test-discovery"></span><h2>26.4.3. テストディスカバリ<a class="headerlink" href="#test-discovery" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加.</span></p>
</div>
<p>unittest はシンプルなテストディスカバリをサポートします。
テストディスカバリに対応するには、全テストファイルはプロジェクトの最上位のディスカバリからインポート可能な <a class="reference internal" href="../tutorial/modules.html#tut-modules"><span class="std std-ref">モジュール</span></a> か (<a class="reference internal" href="../glossary.html#term-namespace-package"><span class="xref std std-term">名前空間パッケージ</span></a> を含む) <a class="reference internal" href="../tutorial/modules.html#tut-packages"><span class="std std-ref">パッケージ</span></a> でなければなりません (つまりそれらのファイル名は有効な <a class="reference internal" href="../reference/lexical_analysis.html#identifiers"><span class="std std-ref">識別子</span></a> でなければなりません)。</p>
<p>テストディスカバリは <a class="reference internal" href="#unittest.TestLoader.discover" title="unittest.TestLoader.discover"><code class="xref py py-meth docutils literal"><span class="pre">TestLoader.discover()</span></code></a> で実装されていますが、コマンドラインから使う事も出来ます。その基本的な使い方は:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">project_directory</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last"><code class="docutils literal"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">unittest</span></code> は <code class="docutils literal"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">unittest</span> <span class="pre">discover</span></code> と等価なショートカットです。テストディスカバリに引数を渡したい場合は、<code class="docutils literal"><span class="pre">discover</span></code> サブコマンドを明示的に使用しなければなりません。</p>
</div>
<p><code class="docutils literal"><span class="pre">discover</span></code> サブコマンドには以下のオプションがあります:</p>
<dl class="cmdoption">
<dt id="cmdoption-unittest-discover-v">
<span id="cmdoption-unittest-discover--verbose"></span><code class="descname">-v</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--verbose</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-unittest-discover-v" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>詳細な出力</p>
</dd></dl>

<dl class="cmdoption">
<dt id="cmdoption-unittest-discover-s">
<span id="cmdoption-unittest-discover--start-directory"></span><code class="descname">-s</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--start-directory</code><code class="descclassname"> directory</code><a class="headerlink" href="#cmdoption-unittest-discover-s" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ディスカバリを開始するディレクトリ (デフォルトは <code class="docutils literal"><span class="pre">.</span></code>)</p>
</dd></dl>

<dl class="cmdoption">
<dt id="cmdoption-unittest-discover-p">
<span id="cmdoption-unittest-discover--pattern"></span><code class="descname">-p</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--pattern</code><code class="descclassname"> pattern</code><a class="headerlink" href="#cmdoption-unittest-discover-p" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストファイル名を識別するパターン (デフォルトは <code class="docutils literal"><span class="pre">test*.py</span></code>)</p>
</dd></dl>

<dl class="cmdoption">
<dt id="cmdoption-unittest-discover-t">
<span id="cmdoption-unittest-discover--top-level-directory"></span><code class="descname">-t</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--top-level-directory</code><code class="descclassname"> directory</code><a class="headerlink" href="#cmdoption-unittest-discover-t" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>プロジェクトの最上位のディスカバリのディレクトリ (デフォルトは開始のディレクトリ)</p>
</dd></dl>

<p><a class="reference internal" href="#cmdoption-unittest-discover-s"><code class="xref std std-option docutils literal"><span class="pre">-s</span></code></a> 、 <a class="reference internal" href="#cmdoption-unittest-discover-p"><code class="xref std std-option docutils literal"><span class="pre">-p</span></code></a> 、および <a class="reference internal" href="#cmdoption-unittest-discover-t"><code class="xref std std-option docutils literal"><span class="pre">-t</span></code></a> オプションは、この順番であれば位置固定の引数として渡す事ができます。以下の二つのコマンドは等価です:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">project_directory</span> <span class="o">-</span><span class="n">p</span> <span class="s2">&quot;*_test.py&quot;</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="n">project_directory</span> <span class="s2">&quot;*_test.py&quot;</span>
</pre></div>
</div>
<p>パスと同様にパッケージ名を、例えば <code class="docutils literal"><span class="pre">myproject.subpackage.test</span></code> のように、開始ディレクトリとして渡すことができます。
指定したパッケージ名はインポートされ、そのファイルシステム上の場所が開始ディレクトリとして使われます。</p>
<div class="admonition caution">
<p class="first admonition-title">ご用心</p>
<p>テストディスカバリはインポートによりテストを読み込みます。
一旦テストディスカバリが指定された開始ディレクトリから全テストファイルを見付けると、パスはインポートするパッケージ名に変換されます。
例えば、 <code class="file docutils literal"><span class="pre">foo/bar/baz.py</span></code> は <code class="docutils literal"><span class="pre">foo.bar.baz</span></code> としてインポートされます。</p>
<p>グローバルにインストールされたパッケージがあり、それとは異なるコピーでディスカバリしようとしたとき、誤った場所からインポートが行われる <em>かもしれません</em>。
その場合テストディスカバリは警告し、停止します。</p>
<p class="last">ディレクトリのパスではなくパッケージ名を開始ディレクトリに指定した場合、ディスカバリはインポートするいずれの場所も意図した場所とするため、警告を受けないはずです。</p>
</div>
<p>テストモジュールとパッケージは、 <a class="reference internal" href="#load-tests-protocol">load_tests プロトコル</a> によってテストのロードとディスカバリをカスタマイズすることができます。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.4 で変更: </span>ディスカバリが <a class="reference internal" href="../glossary.html#term-namespace-package"><span class="xref std std-term">名前空間パッケージ</span></a> をサポートしました。</p>
</div>
</div>
<div class="section" id="organizing-test-code">
<span id="organizing-tests"></span><h2>26.4.4. テストコードの構成<a class="headerlink" href="#organizing-test-code" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>ユニットテストの基本的な構成要素は、 <em class="dfn">テストケース</em> &#8212; 設定され正しさのためにチェックされるべき単独のシナリオ &#8212; です。
<a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> では、テストケースは <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">unittest.TestCase</span></code></a> クラスのインスタンスで表現されます。
独自のテストケースを作成するには <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> のサブクラスを記述するか、 <a class="reference internal" href="#unittest.FunctionTestCase" title="unittest.FunctionTestCase"><code class="xref py py-class docutils literal"><span class="pre">FunctionTestCase</span></code></a> を使用しなければなりません。</p>
<p><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> インスタンスのテストコードは完全に独立していなければなりません。
すなわち単独でか、他の様々なテストケースの任意の組み合わせのいずれかで実行可能でなければなりません。</p>
<p>最も単純な <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> のサブクラスは、特定のテストコードを実行するためのテストメソッド (すなわち名前が <code class="docutils literal"><span class="pre">test</span></code> で始まるメソッド) を実装するだけで簡単に書くことができます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unittest</span>

<span class="k">class</span> <span class="nc">DefaultWidgetSizeTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_default_widget_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">Widget</span><span class="p">(</span><span class="s1">&#39;The widget&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">widget</span><span class="o">.</span><span class="n">size</span><span class="p">(),</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
</pre></div>
</div>
<p>何らかのテストを行う場合、ベースクラス <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> の <code class="xref py py-meth docutils literal"><span class="pre">assert*()</span></code> メソッドの一つを使用してください。テスト が失敗すると例外が送出され、 <a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> はテストケースを <em class="dfn">failure</em> とします。その他の例外は <em class="dfn">error</em> として扱われます。</p>
<p>テストは多くなり、それらの設定は繰り返しになるかもしれません。
幸いにも、<a class="reference internal" href="#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal"><span class="pre">setUp()</span></code></a> メソッドを実装することで設定コードをくくり出すことができます。
テストフレームワークは実行するテストごとに自動的に <a class="reference internal" href="#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal"><span class="pre">setUp()</span></code></a> を呼びます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unittest</span>

<span class="k">class</span> <span class="nc">WidgetTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">Widget</span><span class="p">(</span><span class="s1">&#39;The widget&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_default_widget_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">size</span><span class="p">(),</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">),</span>
                         <span class="s1">&#39;incorrect default size&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_widget_resize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">150</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">size</span><span class="p">(),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">150</span><span class="p">),</span>
                         <span class="s1">&#39;wrong size after resize&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">いろいろなテストが実行される順序は、文字列の組み込みの順序でテストメソッド名をソートすることで決まります。</p>
</div>
<p>テスト中に <a class="reference internal" href="#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal"><span class="pre">setUp()</span></code></a> メソッドで例外が発生した場合、フレームワークはそのテストに問題があるとみなし、そのテストメソッドは実行されません。</p>
<p>同様に、テストメソッド実行後に片付けをする <a class="reference internal" href="#unittest.TestCase.tearDown" title="unittest.TestCase.tearDown"><code class="xref py py-meth docutils literal"><span class="pre">tearDown()</span></code></a> メソッドを提供出来ます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unittest</span>

<span class="k">class</span> <span class="nc">WidgetTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">Widget</span><span class="p">(</span><span class="s1">&#39;The widget&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>
</pre></div>
</div>
<p><a class="reference internal" href="#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal"><span class="pre">setUp()</span></code></a> が成功した場合、テストメソッドが成功したかどうかに関わらず <a class="reference internal" href="#unittest.TestCase.tearDown" title="unittest.TestCase.tearDown"><code class="xref py py-meth docutils literal"><span class="pre">tearDown()</span></code></a> が実行されます。</p>
<p>このようなテストコードの実行環境を <em class="dfn">fixture</em> と呼びます。</p>
<p>テストケースのインスタンスはテストする機能によってまとめられます。
<a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> はこのための機構、<a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> の <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> クラスで表現される <em class="dfn">test suite</em>、を提供します。
たいていの場合 <a class="reference internal" href="#unittest.main" title="unittest.main"><code class="xref py py-func docutils literal"><span class="pre">unittest.main()</span></code></a> を呼び出しは正しい処理を行い、モジュールの全テストケースを集めて実行します。</p>
<p>しかし、テストスイートの構築をカスタマイズしたい場合、自分ですることができます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">suite</span><span class="p">():</span>
    <span class="n">suite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestSuite</span><span class="p">()</span>
    <span class="n">suite</span><span class="o">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">WidgetTestCase</span><span class="p">(</span><span class="s1">&#39;test_default_size&#39;</span><span class="p">))</span>
    <span class="n">suite</span><span class="o">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">WidgetTestCase</span><span class="p">(</span><span class="s1">&#39;test_resize&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">suite</span>
</pre></div>
</div>
<p>テストケースやテストコードの定義を (<code class="file docutils literal"><span class="pre">widget.py</span></code> のような) テスト対象コードと同じモジュールに置くことが出来ますが、テストコードを (<code class="file docutils literal"><span class="pre">test_widget.py</span></code> のような) 独立したモジュールに置くのには以下のような利点があります:</p>
<ul class="simple">
<li><p class="first">テストモジュールだけをコマンドラインから独立に実行することができる。</p>
</li>
<li><p class="first">テストコードと出荷するコードをより簡単に分ける事ができる。</p>
</li>
<li><p class="first">余程のことがない限り、テスト対象のコードに合わせてテストコードを変更することになりにくい。</p>
</li>
<li><p class="first">テストコードは、テスト対象コードほど頻繁に変更されない。</p>
</li>
<li><p class="first">テストコードをより簡単にリファクタリングすることができる。</p>
</li>
<li><p class="first">Cで書いたモジュールのテストはどうせ独立したモジュールなのだから、同様にしない理由がない</p>
</li>
<li><p class="first">テストの方策を変更した場合でも、ソースコードを変更する必要がない。</p>
</li>
</ul>
</div>
<div class="section" id="re-using-old-test-code">
<span id="legacy-unit-tests"></span><h2>26.4.5. 既存テストコードの再利用<a class="headerlink" href="#re-using-old-test-code" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>既存のテストコードが有るとき、このテストを <a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> で実行しようとするために古いテスト関数をいちいち <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> クラスのサブクラスに変換するのは大変です。</p>
<p>このような場合は、 <a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> では <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> のサブクラスである <a class="reference internal" href="#unittest.FunctionTestCase" title="unittest.FunctionTestCase"><code class="xref py py-class docutils literal"><span class="pre">FunctionTestCase</span></code></a> クラスを使い、既存のテスト関数をラップします。初期設定と終了処理も行なえます。</p>
<p>以下のテストコードがあった場合:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">testSomething</span><span class="p">():</span>
    <span class="n">something</span> <span class="o">=</span> <span class="n">makeSomething</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">something</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<p>オプションの set-up と tear-down メソッドを持った同等のテストケースインスタンスは次のように作成します:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">testcase</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">FunctionTestCase</span><span class="p">(</span><span class="n">testSomething</span><span class="p">,</span>
                                     <span class="n">setUp</span><span class="o">=</span><span class="n">makeSomethingDB</span><span class="p">,</span>
                                     <span class="n">tearDown</span><span class="o">=</span><span class="n">deleteSomethingDB</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last"><a class="reference internal" href="#unittest.FunctionTestCase" title="unittest.FunctionTestCase"><code class="xref py py-class docutils literal"><span class="pre">FunctionTestCase</span></code></a> を使って既存のテストを <a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> ベースのテスト体系に変換することができますが、この方法は推奨されません。時間を掛けて <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> のサブクラスに書き直した方が将来的なテストのリファクタリングが限りなく易しくなります。</p>
</div>
<p>既存のテストが <a class="reference internal" href="doctest.html#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal"><span class="pre">doctest</span></code></a> を使って書かれている場合もあるでしょう。その場合、 <a class="reference internal" href="doctest.html#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal"><span class="pre">doctest</span></code></a> は <code class="xref py py-class docutils literal"><span class="pre">DocTestSuite</span></code> クラスを提供します。このクラスは、既存の <a class="reference internal" href="doctest.html#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal"><span class="pre">doctest</span></code></a>ベースのテストから、自動的に <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">unittest.TestSuite</span></code></a> のインスタンスを作成します。</p>
</div>
<div class="section" id="skipping-tests-and-expected-failures">
<span id="unittest-skipping"></span><h2>26.4.6. テストのスキップと予期された失敗<a class="headerlink" href="#skipping-tests-and-expected-failures" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
<p>unittest は特定のテストメソッドやテストクラス全体をスキップする仕組みを備えています。さらに、この機能はテスト結果を「予期された失敗 (expected failure)」とすることができ、テストが失敗しても <a class="reference internal" href="#unittest.TestResult" title="unittest.TestResult"><code class="xref py py-class docutils literal"><span class="pre">TestResult</span></code></a> の失敗数にはカウントされなくなります。</p>
<p>テストをスキップするには、単に <a class="reference internal" href="#unittest.skip" title="unittest.skip"><code class="xref py py-func docutils literal"><span class="pre">skip()</span></code></a> <a class="reference internal" href="../glossary.html#term-decorator"><span class="xref std std-term">デコレータ</span></a> かその条件的な変種の一つを使用します。</p>
<p>基本的なスキップは以下のようになります:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="nd">@unittest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="s2">&quot;demonstrating skipping&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_nothing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;shouldn&#39;t happen&quot;</span><span class="p">)</span>

    <span class="nd">@unittest</span><span class="o">.</span><span class="n">skipIf</span><span class="p">(</span><span class="n">mylib</span><span class="o">.</span><span class="n">__version__</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                     <span class="s2">&quot;not supported in this library version&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_format</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Tests that work for only a certain version of the library.</span>
        <span class="k">pass</span>

    <span class="nd">@unittest</span><span class="o">.</span><span class="n">skipUnless</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;win&quot;</span><span class="p">),</span> <span class="s2">&quot;requires Windows&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_windows_support</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># windows specific testing code</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>このサンプルを冗長モードで実行すると以下のように出力されます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">test_format</span> <span class="p">(</span><span class="n">__main__</span><span class="o">.</span><span class="n">MyTestCase</span><span class="p">)</span> <span class="o">...</span> <span class="n">skipped</span> <span class="s1">&#39;not supported in this library version&#39;</span>
<span class="n">test_nothing</span> <span class="p">(</span><span class="n">__main__</span><span class="o">.</span><span class="n">MyTestCase</span><span class="p">)</span> <span class="o">...</span> <span class="n">skipped</span> <span class="s1">&#39;demonstrating skipping&#39;</span>
<span class="n">test_windows_support</span> <span class="p">(</span><span class="n">__main__</span><span class="o">.</span><span class="n">MyTestCase</span><span class="p">)</span> <span class="o">...</span> <span class="n">skipped</span> <span class="s1">&#39;requires Windows&#39;</span>

<span class="o">----------------------------------------------------------------------</span>
<span class="n">Ran</span> <span class="mi">3</span> <span class="n">tests</span> <span class="ow">in</span> <span class="mf">0.005</span><span class="n">s</span>

<span class="n">OK</span> <span class="p">(</span><span class="n">skipped</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>テストクラスは以下のようにメソッドをスキップすることができます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="nd">@unittest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="s2">&quot;showing class skipping&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MySkippedTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_not_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p><a class="reference internal" href="#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal"><span class="pre">TestCase.setUp()</span></code></a> もスキップすることができます。この機能はセットアップの対象のリソースが使用不可能な時に便利です。</p>
<p>予期された失敗の機能を使用するには <a class="reference internal" href="#unittest.expectedFailure" title="unittest.expectedFailure"><code class="xref py py-func docutils literal"><span class="pre">expectedFailure()</span></code></a> デコレータを使います。</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ExpectedFailureTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="nd">@unittest</span><span class="o">.</span><span class="n">expectedFailure</span>
    <span class="k">def</span> <span class="nf">test_fail</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;broken&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>独自のスキップ用のデコレータの作成は簡単です。 そのためには、独自のデコレータのスキップしたい時点で <a class="reference internal" href="#unittest.skip" title="unittest.skip"><code class="xref py py-func docutils literal"><span class="pre">skip()</span></code></a> を呼び出します。 以下のデコレータはオブジェクトに指定した属性が無い場合にテストをスキップします:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">skipUnlessHasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
        <span class="k">return</span> <span class="k">lambda</span> <span class="n">func</span><span class="p">:</span> <span class="n">func</span>
    <span class="k">return</span> <span class="n">unittest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{!r}</span><span class="s2"> doesn&#39;t have </span><span class="si">{!r}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">attr</span><span class="p">))</span>
</pre></div>
</div>
<p>以下のデコレータはテストのスキップと予期された失敗を実装しています:</p>
<dl class="function">
<dt id="unittest.skip">
<code class="descclassname">&#64;</code><code class="descclassname">unittest.</code><code class="descname">skip</code><span class="sig-paren">(</span><em>reason</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.skip" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>デコレートしたテストを無条件でスキップします。<em>reason</em> にはテストをスキップした理由を記載します。</p>
</dd></dl>

<dl class="function">
<dt id="unittest.skipIf">
<code class="descclassname">&#64;</code><code class="descclassname">unittest.</code><code class="descname">skipIf</code><span class="sig-paren">(</span><em>condition</em>, <em>reason</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.skipIf" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>condition</em> が真の場合、デコレートしたテストをスキップします。</p>
</dd></dl>

<dl class="function">
<dt id="unittest.skipUnless">
<code class="descclassname">&#64;</code><code class="descclassname">unittest.</code><code class="descname">skipUnless</code><span class="sig-paren">(</span><em>condition</em>, <em>reason</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.skipUnless" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>condition</em> が偽の場合、デコレートしたテストをスキップします。</p>
</dd></dl>

<dl class="function">
<dt id="unittest.expectedFailure">
<code class="descclassname">&#64;</code><code class="descclassname">unittest.</code><code class="descname">expectedFailure</code><a class="headerlink" href="#unittest.expectedFailure" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストを予期された失敗だとします。実行時にテストが失敗しても、そのテストは失敗にカウントされません。</p>
</dd></dl>

<dl class="exception">
<dt id="unittest.SkipTest">
<em class="property">exception </em><code class="descclassname">unittest.</code><code class="descname">SkipTest</code><span class="sig-paren">(</span><em>reason</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.SkipTest" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>この例外はテストをスキップするために送出されます。</p>
<p>ふつうはこれを直接送出する代わりに <a class="reference internal" href="#unittest.TestCase.skipTest" title="unittest.TestCase.skipTest"><code class="xref py py-meth docutils literal"><span class="pre">TestCase.skipTest()</span></code></a> やスキッピングデコレータの一つを使用出来ます。</p>
</dd></dl>

<p>スキップしたテストの前後では、 <a class="reference internal" href="#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal"><span class="pre">setUp()</span></code></a> および <a class="reference internal" href="#unittest.TestCase.tearDown" title="unittest.TestCase.tearDown"><code class="xref py py-meth docutils literal"><span class="pre">tearDown()</span></code></a> は実行されません。同様に、スキップしたクラスの前後では、 <a class="reference internal" href="#unittest.TestCase.setUpClass" title="unittest.TestCase.setUpClass"><code class="xref py py-meth docutils literal"><span class="pre">setUpClass()</span></code></a> および <a class="reference internal" href="#unittest.TestCase.tearDownClass" title="unittest.TestCase.tearDownClass"><code class="xref py py-meth docutils literal"><span class="pre">tearDownClass()</span></code></a> は実行されません。スキップしたモジュールの前後では、 <code class="xref py py-meth docutils literal"><span class="pre">setUpModule()</span></code> および <code class="xref py py-meth docutils literal"><span class="pre">tearDownModule()</span></code> は実行されません。</p>
</div>
<div class="section" id="distinguishing-test-iterations-using-subtests">
<span id="subtests"></span><h2>26.4.7. サブテストを利用して繰り返しテストの区別を付ける<a class="headerlink" href="#distinguishing-test-iterations-using-subtests" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.4 で追加.</span></p>
</div>
<p>パラメータの値しか違わないような小さな差しかない複数テストを書きたい場合に、コンテキストマネージャ <a class="reference internal" href="#unittest.TestCase.subTest" title="unittest.TestCase.subTest"><code class="xref py py-meth docutils literal"><span class="pre">subTest()</span></code></a> を使うことで、複数の独立したテストのように扱われるテストを一つのメソッド本体内で書くことが出来ます。</p>
<p>例えば以下のテストは:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NumbersTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_even</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that numbers between 0 and 5 are all even.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">subTest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>以下の出力をします:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="o">======================================================================</span>
<span class="n">FAIL</span><span class="p">:</span> <span class="n">test_even</span> <span class="p">(</span><span class="n">__main__</span><span class="o">.</span><span class="n">NumbersTest</span><span class="p">)</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="o">----------------------------------------------------------------------</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;subtests.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">32</span><span class="p">,</span> <span class="ow">in</span> <span class="n">test_even</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="ne">AssertionError</span><span class="p">:</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">0</span>

<span class="o">======================================================================</span>
<span class="n">FAIL</span><span class="p">:</span> <span class="n">test_even</span> <span class="p">(</span><span class="n">__main__</span><span class="o">.</span><span class="n">NumbersTest</span><span class="p">)</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="o">----------------------------------------------------------------------</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;subtests.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">32</span><span class="p">,</span> <span class="ow">in</span> <span class="n">test_even</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="ne">AssertionError</span><span class="p">:</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">0</span>

<span class="o">======================================================================</span>
<span class="n">FAIL</span><span class="p">:</span> <span class="n">test_even</span> <span class="p">(</span><span class="n">__main__</span><span class="o">.</span><span class="n">NumbersTest</span><span class="p">)</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="o">----------------------------------------------------------------------</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;subtests.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">32</span><span class="p">,</span> <span class="ow">in</span> <span class="n">test_even</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="ne">AssertionError</span><span class="p">:</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>サブテスト無しの場合、最初の失敗で実行は停止し、<code class="docutils literal"><span class="pre">i</span></code> の値が表示されないためエラーの原因を突き止めるのは困難になります:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="o">======================================================================</span>
<span class="n">FAIL</span><span class="p">:</span> <span class="n">test_even</span> <span class="p">(</span><span class="n">__main__</span><span class="o">.</span><span class="n">NumbersTest</span><span class="p">)</span>
<span class="o">----------------------------------------------------------------------</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;subtests.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">32</span><span class="p">,</span> <span class="ow">in</span> <span class="n">test_even</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="ne">AssertionError</span><span class="p">:</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="section" id="classes-and-functions">
<span id="unittest-contents"></span><h2>26.4.8. クラスと関数<a class="headerlink" href="#classes-and-functions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>この節では、 <a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> モジュールのAPIの詳細について説明します。</p>
<div class="section" id="test-cases">
<span id="testcase-objects"></span><h3>26.4.8.1. テストクラス<a class="headerlink" href="#test-cases" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl class="class">
<dt id="unittest.TestCase">
<em class="property">class </em><code class="descclassname">unittest.</code><code class="descname">TestCase</code><span class="sig-paren">(</span><em>methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> クラスのインスタンスは、 <a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> の世界における論理的なテストの単位を示します。このクラスをベースクラスとして使用し、必要なテストを具象サブクラスに実装します。 <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> クラスでは、テストランナーがテストを実行するため のインターフェースと、各種の失敗をチェックしレポートするためのメソッドを実装しています。</p>
<p><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> の各インスタンスは <em>methodName</em> という名前の単一の基底メソッドを実行します。
<a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> を使用する大半の場合 <em>methodName</em> を変更したりデフォルトの <code class="docutils literal"><span class="pre">runTest()</span></code> メソッドを再実装することはありません。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.2 で変更: </span><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> が <em>methodName</em> を指定しなくてもインスタンス化できるようになりました。これにより対話的インタプリタから <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> を簡単に試せるようになりました。</p>
</div>
<p><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> のインスタンスのメソッドは3種類のグループを提供します。
1つ目のグループはテストの実行で使用されします。
2つ目のグループは条件のチェックおよび失敗のレポートを行うテストの実装で使用されます。
3つ目のグループである問い合わせ用のメソッドによってテスト自身の情報が収集されます。</p>
<p>はじめのグループ (テスト実行) に含まれるメソッドは以下の通りです:</p>
<dl class="method">
<dt id="unittest.TestCase.setUp">
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.setUp" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストフィクスチャの準備のために呼び出されるメソッドです。テストメソッドの直前に呼び出されます。このメソッドで <a class="reference internal" href="exceptions.html#AssertionError" title="AssertionError"><code class="xref py py-exc docutils literal"><span class="pre">AssertionError</span></code></a> や <a class="reference internal" href="#unittest.SkipTest" title="unittest.SkipTest"><code class="xref py py-exc docutils literal"><span class="pre">SkipTest</span></code></a> 以外の例外が発生した場合、テストの失敗ではなくエラーとされます。デフォルトの実装では何も行いません。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.tearDown">
<code class="descname">tearDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.tearDown" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストメソッドが実行され、結果が記録された直後に呼び出されるメソッドです。
このメソッドはテストメソッドで例外が投げられても呼び出されます。
そのため、サブクラスでこのメソッドを実装する場合は、内部状態を確認することが必要になるでしょう。
このメソッドで <a class="reference internal" href="exceptions.html#AssertionError" title="AssertionError"><code class="xref py py-exc docutils literal"><span class="pre">AssertionError</span></code></a> や <a class="reference internal" href="#unittest.SkipTest" title="unittest.SkipTest"><code class="xref py py-exc docutils literal"><span class="pre">SkipTest</span></code></a> 以外の例外が発生した場合、テストの失敗とは別のエラーとみなされます (従って報告されるエラーの総数は増えます)。
このメソッドは、テストの結果に関わらず <a class="reference internal" href="#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal"><span class="pre">setUp()</span></code></a> が成功した場合にのみ呼ばれます。
デフォルトの実装では何も行いません。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.setUpClass">
<code class="descname">setUpClass</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.setUpClass" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>個別のクラス内のテストが実行される前に呼び出されるクラスメソッドです。 <code class="docutils literal"><span class="pre">setUpClass</span></code> はクラスを唯一の引数として取り、 <a class="reference internal" href="functions.html#classmethod" title="classmethod"><code class="xref py py-func docutils literal"><span class="pre">classmethod()</span></code></a> でデコレートされていなければなりません:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">setUpClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>詳しくは <a class="reference internal" href="#class-and-module-fixtures">クラスとモジュールのフィクスチャ</a> を参照してください。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.tearDownClass">
<code class="descname">tearDownClass</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.tearDownClass" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>個別のクラス内のテストが実行された後に呼び出されるクラスメソッドです。 <code class="docutils literal"><span class="pre">tearDownClass</span></code> はクラスを唯一の引数として取り、 <a class="reference internal" href="functions.html#classmethod" title="classmethod"><code class="xref py py-func docutils literal"><span class="pre">classmethod()</span></code></a> でデコレーされていなければなりません:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">tearDownClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>詳しくは <a class="reference internal" href="#class-and-module-fixtures">クラスとモジュールのフィクスチャ</a> を参照してください。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>result=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.run" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストを実行し、テスト結果を <em>result</em> に指定された <a class="reference internal" href="#unittest.TestResult" title="unittest.TestResult"><code class="xref py py-class docutils literal"><span class="pre">TestResult</span></code></a> オブジェクトにまとめます。 <em>result</em> が省略されるか <code class="docutils literal"><span class="pre">None</span></code> が渡された場合、 (<a class="reference internal" href="#unittest.TestCase.defaultTestResult" title="unittest.TestCase.defaultTestResult"><code class="xref py py-meth docutils literal"><span class="pre">defaultTestResult()</span></code></a> メソッドを呼んで)  一時的な結果オブジェクトを生成し、使用します。 結果オブジェクトは <a class="reference internal" href="#unittest.TestCase.run" title="unittest.TestCase.run"><code class="xref py py-meth docutils literal"><span class="pre">run()</span></code></a> の呼び出し元に返されます。</p>
<p>このメソッドは、単に <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> インスタンスを呼び出した場合と同様に振る舞います。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.3 で変更: </span>以前のバージョンの <code class="docutils literal"><span class="pre">run</span></code> は結果オブジェクトを返しませんでした。また <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> インスタンスを呼び出した場合も同様でした。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.skipTest">
<code class="descname">skipTest</code><span class="sig-paren">(</span><em>reason</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.skipTest" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストメソッドや <a class="reference internal" href="#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal"><span class="pre">setUp()</span></code></a> が現在のテストをスキップする間に呼ばれます。詳細については、 <a class="reference internal" href="#unittest-skipping"><span class="std std-ref">テストのスキップと予期された失敗</span></a> を参照してください。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.subTest">
<code class="descname">subTest</code><span class="sig-paren">(</span><em>msg=None</em>, <em>**params</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.subTest" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このメソッドを囲っているブロックをサブテストとして実行するコンテキストマネージャを返します。
<em>msg</em> と <em>params</em> はサブテストが失敗したときに表示されるオプションの任意の値で、どんな値が使われたかを明確にするものです。</p>
<p>テストケースには subtest 宣言を幾らでも含めることができ、任意にネストすることができます。</p>
<p>詳細は <a class="reference internal" href="#subtests"><span class="std std-ref">サブテストを利用して繰り返しテストの区別を付ける</span></a> を参照してください。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.4 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.debug">
<code class="descname">debug</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.debug" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テスト結果を収集せずにテストを実行します。例外が呼び出し元に通知されます。また、テストをデバッガで実行することができます。</p>
</dd></dl>

<p id="assert-methods"><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> クラスは失敗の検査と報告を行う多くのメソッドを提供しています。
以下の表は最も一般的に使われるメソッドを列挙しています (より多くのアサートメソッドについては表の下を見てください):</p>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="34%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><p class="first last">メソッド</p>
</th>
<th class="head"><p class="first last">確認事項</p>
</th>
<th class="head"><p class="first last">初出</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertEqual(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">a</span> <span class="pre">==</span> <span class="pre">b</span></code></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertNotEqual" title="unittest.TestCase.assertNotEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertNotEqual(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">a</span> <span class="pre">!=</span> <span class="pre">b</span></code></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertTrue" title="unittest.TestCase.assertTrue"><code class="xref py py-meth docutils literal"><span class="pre">assertTrue(x)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">bool(x)</span> <span class="pre">is</span> <span class="pre">True</span></code></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertFalse" title="unittest.TestCase.assertFalse"><code class="xref py py-meth docutils literal"><span class="pre">assertFalse(x)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">bool(x)</span> <span class="pre">is</span> <span class="pre">False</span></code></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertIs" title="unittest.TestCase.assertIs"><code class="xref py py-meth docutils literal"><span class="pre">assertIs(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">a</span> <span class="pre">is</span> <span class="pre">b</span></code></td>
<td>3.1</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertIsNot" title="unittest.TestCase.assertIsNot"><code class="xref py py-meth docutils literal"><span class="pre">assertIsNot(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">a</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">b</span></code></td>
<td>3.1</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertIsNone" title="unittest.TestCase.assertIsNone"><code class="xref py py-meth docutils literal"><span class="pre">assertIsNone(x)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">x</span> <span class="pre">is</span> <span class="pre">None</span></code></td>
<td>3.1</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertIsNotNone" title="unittest.TestCase.assertIsNotNone"><code class="xref py py-meth docutils literal"><span class="pre">assertIsNotNone(x)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">x</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">None</span></code></td>
<td>3.1</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertIn" title="unittest.TestCase.assertIn"><code class="xref py py-meth docutils literal"><span class="pre">assertIn(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">a</span> <span class="pre">in</span> <span class="pre">b</span></code></td>
<td>3.1</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertNotIn" title="unittest.TestCase.assertNotIn"><code class="xref py py-meth docutils literal"><span class="pre">assertNotIn(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">a</span> <span class="pre">not</span> <span class="pre">in</span> <span class="pre">b</span></code></td>
<td>3.1</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertIsInstance" title="unittest.TestCase.assertIsInstance"><code class="xref py py-meth docutils literal"><span class="pre">assertIsInstance(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">isinstance(a,</span> <span class="pre">b)</span></code></td>
<td>3.2</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertNotIsInstance" title="unittest.TestCase.assertNotIsInstance"><code class="xref py py-meth docutils literal"><span class="pre">assertNotIsInstance(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">not</span> <span class="pre">isinstance(a,</span> <span class="pre">b)</span></code></td>
<td>3.2</td>
</tr>
</tbody>
</table>
<p>全てのアサートメソッドは <em>msg</em> 引数を受け取り、指定された場合、失敗時のエラーメッセージとして使われます。 (<a class="reference internal" href="#unittest.TestCase.longMessage" title="unittest.TestCase.longMessage"><code class="xref py py-data docutils literal"><span class="pre">longMessage</span></code></a> も参照してください)。 <em>msg</em> キーワード引数は <a class="reference internal" href="#unittest.TestCase.assertRaises" title="unittest.TestCase.assertRaises"><code class="xref py py-meth docutils literal"><span class="pre">assertRaises()</span></code></a> 、 <a class="reference internal" href="#unittest.TestCase.assertRaisesRegex" title="unittest.TestCase.assertRaisesRegex"><code class="xref py py-meth docutils literal"><span class="pre">assertRaisesRegex()</span></code></a> 、 <a class="reference internal" href="#unittest.TestCase.assertWarns" title="unittest.TestCase.assertWarns"><code class="xref py py-meth docutils literal"><span class="pre">assertWarns()</span></code></a> 、 <a class="reference internal" href="#unittest.TestCase.assertWarnsRegex" title="unittest.TestCase.assertWarnsRegex"><code class="xref py py-meth docutils literal"><span class="pre">assertWarnsRegex()</span></code></a> には、そのメソッドをコンテキストマネージャとして使った場合にのみ使えます。</p>
<dl class="method">
<dt id="unittest.TestCase.assertEqual">
<code class="descname">assertEqual</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertEqual" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>first</em> と <em>second</em> が等しいことをテストします。両者が等しくない場合、テストは失敗です。</p>
<p>さらに、 <em>first</em> と <em>second</em> が厳密に同じ型であり、list、tuple、dict、set、frozenset もしくは str のいずれか、またはサブクラスが <a class="reference internal" href="#unittest.TestCase.addTypeEqualityFunc" title="unittest.TestCase.addTypeEqualityFunc"><code class="xref py py-meth docutils literal"><span class="pre">addTypeEqualityFunc()</span></code></a> に登録されている任意の型の場合、より有用なデフォルトのエラーメッセージを生成するために、その型特有の比較関数が呼ばれます（<a class="reference internal" href="#type-specific-methods"><span class="std std-ref">型固有のメソッドの一覧</span></a> も参照してください）。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.1 で変更: </span>自動で型固有の比較関数が呼ばれるようになりました。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.2 で変更: </span>文字列比較のデフォルトの比較関数として <a class="reference internal" href="#unittest.TestCase.assertMultiLineEqual" title="unittest.TestCase.assertMultiLineEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertMultiLineEqual()</span></code></a> が追加されました。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertNotEqual">
<code class="descname">assertNotEqual</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertNotEqual" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>first</em> と <em>second</em> が等しくないことをテストします。両者が等しい場合、テストは失敗です。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertTrue">
<code class="descname">assertTrue</code><span class="sig-paren">(</span><em>expr</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertTrue" title="この定義へのパーマリンク">¶</a></dt>
<dt id="unittest.TestCase.assertFalse">
<code class="descname">assertFalse</code><span class="sig-paren">(</span><em>expr</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertFalse" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>expr</em> が真 (偽) であることをテストします。</p>
<p>このメソッドは、<code class="docutils literal"><span class="pre">bool(expr)</span> <span class="pre">is</span> <span class="pre">True</span></code> と等価であり、<code class="docutils literal"><span class="pre">expr</span> <span class="pre">is</span> <span class="pre">True</span></code> と等価ではないことに注意が必要です (後者のためには、<code class="docutils literal"><span class="pre">assertIs(expr,</span> <span class="pre">True)</span></code> が用意されています)。また、専用のメソッドが使用できる場合には、そちらを使用してください (例えば <code class="docutils literal"><span class="pre">assertTrue(a</span> <span class="pre">==</span> <span class="pre">b)</span></code> の代わりに <code class="docutils literal"><span class="pre">assertEqual(a,</span> <span class="pre">b)</span></code> を使用してください)。そうすることにより、テスト失敗時のエラーメッセージを詳細に表示することができます。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertIs">
<code class="descname">assertIs</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertIs" title="この定義へのパーマリンク">¶</a></dt>
<dt id="unittest.TestCase.assertIsNot">
<code class="descname">assertIsNot</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertIsNot" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>first</em> と <em>second</em> が同じオブジェクトであること (そうでないこと) をテストします。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertIsNone">
<code class="descname">assertIsNone</code><span class="sig-paren">(</span><em>expr</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertIsNone" title="この定義へのパーマリンク">¶</a></dt>
<dt id="unittest.TestCase.assertIsNotNone">
<code class="descname">assertIsNotNone</code><span class="sig-paren">(</span><em>expr</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertIsNotNone" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>expr</em> が <code class="docutils literal"><span class="pre">None</span></code> であること (および、そうでないこと) をテストします。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertIn">
<code class="descname">assertIn</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertIn" title="この定義へのパーマリンク">¶</a></dt>
<dt id="unittest.TestCase.assertNotIn">
<code class="descname">assertNotIn</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertNotIn" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>first</em> が <em>second</em> に含まれること (そうでないこと) をテストします。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertIsInstance">
<code class="descname">assertIsInstance</code><span class="sig-paren">(</span><em>obj</em>, <em>cls</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertIsInstance" title="この定義へのパーマリンク">¶</a></dt>
<dt id="unittest.TestCase.assertNotIsInstance">
<code class="descname">assertNotIsInstance</code><span class="sig-paren">(</span><em>obj</em>, <em>cls</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertNotIsInstance" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>obj</em> が <em>cls</em> のインスタンスであること (あるいはそうでないこと) をテストします (この <em>cls</em> は、 <a class="reference internal" href="functions.html#isinstance" title="isinstance"><code class="xref py py-func docutils literal"><span class="pre">isinstance()</span></code></a> が扱うことのできる、クラスもしくはクラスのタプルである必要があります)。正確な型をチェックするためには、 <a class="reference internal" href="#unittest.TestCase.assertIs" title="unittest.TestCase.assertIs"><code class="xref py py-func docutils literal"><span class="pre">assertIs(type(obj),</span> <span class="pre">cls)</span></code></a> を使用してください。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加.</span></p>
</div>
</dd></dl>

<p>以下のメソッドを使用して例外、警告、およびログメッセージの発生を確認することが出来ます:</p>
<table border="1" class="docutils">
<colgroup>
<col width="53%" />
<col width="36%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><p class="first last">メソッド</p>
</th>
<th class="head"><p class="first last">確認事項</p>
</th>
<th class="head"><p class="first last">初出</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertRaises" title="unittest.TestCase.assertRaises"><code class="xref py py-meth docutils literal"><span class="pre">assertRaises(exc,</span> <span class="pre">fun,</span> <span class="pre">*args,</span> <span class="pre">**kwds)</span></code></a></td>
<td><p class="first last"><code class="docutils literal"><span class="pre">fun(*args,</span> <span class="pre">**kwds)</span></code> が <em>exc</em> を送出する</p>
</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertRaisesRegex" title="unittest.TestCase.assertRaisesRegex"><code class="xref py py-meth docutils literal"><span class="pre">assertRaisesRegex(exc,</span> <span class="pre">r,</span> <span class="pre">fun,</span> <span class="pre">*args,</span> <span class="pre">**kwds)</span></code></a></td>
<td><p class="first last"><code class="docutils literal"><span class="pre">fun(*args,</span> <span class="pre">**kwds)</span></code> が <em>exc</em> を送出してメッセージが正規表現 <em>r</em> とマッチする</p>
</td>
<td>3.1</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertWarns" title="unittest.TestCase.assertWarns"><code class="xref py py-meth docutils literal"><span class="pre">assertWarns(warn,</span> <span class="pre">fun,</span> <span class="pre">*args,</span> <span class="pre">**kwds)</span></code></a></td>
<td><p class="first last"><code class="docutils literal"><span class="pre">fun(*args,</span> <span class="pre">**kwds)</span></code> が <em>warn</em> を送出する</p>
</td>
<td>3.2</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertWarnsRegex" title="unittest.TestCase.assertWarnsRegex"><code class="xref py py-meth docutils literal"><span class="pre">assertWarnsRegex(warn,</span> <span class="pre">r,</span> <span class="pre">fun,</span> <span class="pre">*args,</span> <span class="pre">**kwds)</span></code></a></td>
<td><p class="first last"><code class="docutils literal"><span class="pre">fun(*args,</span> <span class="pre">**kwds)</span></code> が <em>warn</em> を送出してメッセージが正規表現 <em>r</em> とマッチする</p>
</td>
<td>3.2</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertLogs" title="unittest.TestCase.assertLogs"><code class="xref py py-meth docutils literal"><span class="pre">assertLogs(logger,</span> <span class="pre">level)</span></code></a></td>
<td><p class="first last"><code class="docutils literal"><span class="pre">with</span></code> ブロックが 最低 <em>level</em> で <em>logger</em> を使用する</p>
</td>
<td>3.4</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="unittest.TestCase.assertRaises">
<code class="descname">assertRaises</code><span class="sig-paren">(</span><em>exception</em>, <em>callable</em>, <em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertRaises" title="この定義へのパーマリンク">¶</a></dt>
<dt>
<code class="descname">assertRaises</code><span class="sig-paren">(</span><em>exception</em>, <em>msg=None</em><span class="sig-paren">)</span></dt>
<dd><p><em>callable</em> を呼び出した時に例外が発生することをテストします。 <a class="reference internal" href="#unittest.TestCase.assertRaises" title="unittest.TestCase.assertRaises"><code class="xref py py-meth docutils literal"><span class="pre">assertRaises()</span></code></a> で指定した位置パラメータとキーワードパラメータを該当メソッドに渡します。 <em>exception</em> が送出された場合、テストは成功です。また、他の例外が投げられた場合はエラー、例外が送出されなかった場合は失敗になります。複数の例外をキャッチする場合には、例外クラスのタプルを <em>exception</em> に指定してください。</p>
<p><em>exception</em> 引数のみ（またはそれに加えて <em>msg</em> 引数）が渡された場合には、コンテキストマネージャが返されます。これにより関数名を渡す形式ではなく、インラインでテスト対象のコードを書くことができます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">SomeException</span><span class="p">):</span>
    <span class="n">do_something</span><span class="p">()</span>
</pre></div>
</div>
<p>コンテキストマネージャとして使われたときは、 <a class="reference internal" href="#unittest.TestCase.assertRaises" title="unittest.TestCase.assertRaises"><code class="xref py py-meth docutils literal"><span class="pre">assertRaises()</span></code></a> は加えて <em>msg</em> キーワード引数も受け付けます。</p>
<p>このコンテキストマネージャは <code class="xref py py-attr docutils literal"><span class="pre">exception</span></code> で指定されたオブジェクトを格納します。これにより、例外発生時の詳細な確認をおこなうことができます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">SomeException</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">()</span>

<span class="n">the_exception</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">exception</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">the_exception</span><span class="o">.</span><span class="n">error_code</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.1 で変更: </span><a class="reference internal" href="#unittest.TestCase.assertRaises" title="unittest.TestCase.assertRaises"><code class="xref py py-meth docutils literal"><span class="pre">assertRaises()</span></code></a> がコンテキストマネージャとして使えるようになりました。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.2 で変更: </span><code class="xref py py-attr docutils literal"><span class="pre">exception</span></code> 属性が追加されました。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.3 で変更: </span>コンテキストマネージャとして使用したときに <em>msg</em> キーワード引数が追加されました。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertRaisesRegex">
<code class="descname">assertRaisesRegex</code><span class="sig-paren">(</span><em>exception</em>, <em>regex</em>, <em>callable</em>, <em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertRaisesRegex" title="この定義へのパーマリンク">¶</a></dt>
<dt>
<code class="descname">assertRaisesRegex</code><span class="sig-paren">(</span><em>exception</em>, <em>regex</em>, <em>msg=None</em><span class="sig-paren">)</span></dt>
<dd><p><a class="reference internal" href="#unittest.TestCase.assertRaises" title="unittest.TestCase.assertRaises"><code class="xref py py-meth docutils literal"><span class="pre">assertRaises()</span></code></a> と同等ですが、例外の文字列表現が <em>regex</em> にマッチすることもテストします。 <em>regex</em> は正規表現オブジェクトか、 <a class="reference internal" href="re.html#re.search" title="re.search"><code class="xref py py-func docutils literal"><span class="pre">re.search()</span></code></a> が扱える正規表現が書かれた文字列である必要があります。例えば以下のようになります:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegex</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="s2">&quot;invalid literal for.*XYZ&#39;$&quot;</span><span class="p">,</span>
                       <span class="nb">int</span><span class="p">,</span> <span class="s1">&#39;XYZ&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>もしくは:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegex</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="s1">&#39;literal&#39;</span><span class="p">):</span>
   <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;XYZ&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加: </span><code class="docutils literal"><span class="pre">assertRaisesRegexp</span></code> という名前で追加されました。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.2 で変更: </span><a class="reference internal" href="#unittest.TestCase.assertRaisesRegex" title="unittest.TestCase.assertRaisesRegex"><code class="xref py py-meth docutils literal"><span class="pre">assertRaisesRegex()</span></code></a> にリネームされました。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.3 で変更: </span>コンテキストマネージャとして使用したときに <em>msg</em> キーワード引数が追加されました。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertWarns">
<code class="descname">assertWarns</code><span class="sig-paren">(</span><em>warning</em>, <em>callable</em>, <em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertWarns" title="この定義へのパーマリンク">¶</a></dt>
<dt>
<code class="descname">assertWarns</code><span class="sig-paren">(</span><em>warning</em>, <em>msg=None</em><span class="sig-paren">)</span></dt>
<dd><p><em>callable</em> を呼び出した時に警告が発生することをテストします。 <a class="reference internal" href="#unittest.TestCase.assertWarns" title="unittest.TestCase.assertWarns"><code class="xref py py-meth docutils literal"><span class="pre">assertWarns()</span></code></a> で指定した位置パラメータとキーワードパラメータを該当メソッドに渡します。 <em>warning</em> が発生した場合にテストが成功し、そうでなければ失敗になります。例外が送出された場合はエラーになります。複数の警告を捕捉する場合には、警告クラスのタプルを <em>warnings</em> に指定してください。</p>
<p><em>warning</em> 引数のみ（またはそれに加えて <em>msg</em> 引数）が渡された場合には、コンテキストマネージャが返されます。これにより関数名を渡す形式ではなく、インラインでテスト対象のコードを書くことができます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertWarns</span><span class="p">(</span><span class="n">SomeWarning</span><span class="p">):</span>
    <span class="n">do_something</span><span class="p">()</span>
</pre></div>
</div>
<p>コンテキストマネージャとして使われたときは、 <a class="reference internal" href="#unittest.TestCase.assertWarns" title="unittest.TestCase.assertWarns"><code class="xref py py-meth docutils literal"><span class="pre">assertWarns()</span></code></a> は加えて <em>msg</em> キーワード引数も受け付けます。</p>
<p>このコンテキストマネージャは、捕捉した警告オブジェクトを <code class="xref py py-attr docutils literal"><span class="pre">warning</span></code> 属性に、警告が発生したソース行を <code class="xref py py-attr docutils literal"><span class="pre">filename</span></code> 属性と <code class="xref py py-attr docutils literal"><span class="pre">lineno</span></code> 属性に格納します。これは警告発生時に捕捉された警告に対して追加の確認を行いたい場合に便利です:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertWarns</span><span class="p">(</span><span class="n">SomeWarning</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">()</span>

<span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;myfile.py&#39;</span><span class="p">,</span> <span class="n">cm</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span> <span class="n">cm</span><span class="o">.</span><span class="n">lineno</span><span class="p">)</span>
</pre></div>
</div>
<p>このメソッドは呼び出されたときに警告フィルタを無視して動作します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.3 で変更: </span>コンテキストマネージャとして使用したときに <em>msg</em> キーワード引数が追加されました。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertWarnsRegex">
<code class="descname">assertWarnsRegex</code><span class="sig-paren">(</span><em>warning</em>, <em>regex</em>, <em>callable</em>, <em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertWarnsRegex" title="この定義へのパーマリンク">¶</a></dt>
<dt>
<code class="descname">assertWarnsRegex</code><span class="sig-paren">(</span><em>warning</em>, <em>regex</em>, <em>msg=None</em><span class="sig-paren">)</span></dt>
<dd><p><a class="reference internal" href="#unittest.TestCase.assertWarns" title="unittest.TestCase.assertWarns"><code class="xref py py-meth docutils literal"><span class="pre">assertWarns()</span></code></a> と同等ですが、警告メッセージが <em>regex</em> にマッチすることもテストします。 <em>regex</em> は正規表現オブジェクトか、 <a class="reference internal" href="re.html#re.search" title="re.search"><code class="xref py py-func docutils literal"><span class="pre">re.search()</span></code></a> が扱える正規表現が書かれた文字列である必要があります。例えば以下のようになります:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">assertWarnsRegex</span><span class="p">(</span><span class="ne">DeprecationWarning</span><span class="p">,</span>
                      <span class="sa">r</span><span class="s1">&#39;legacy_function\(\) is deprecated&#39;</span><span class="p">,</span>
                      <span class="n">legacy_function</span><span class="p">,</span> <span class="s1">&#39;XYZ&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>もしくは:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertWarnsRegex</span><span class="p">(</span><span class="ne">RuntimeWarning</span><span class="p">,</span> <span class="s1">&#39;unsafe frobnicating&#39;</span><span class="p">):</span>
    <span class="n">frobnicate</span><span class="p">(</span><span class="s1">&#39;/etc/passwd&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.3 で変更: </span>コンテキストマネージャとして使用したときに <em>msg</em> キーワード引数が追加されました。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertLogs">
<code class="descname">assertLogs</code><span class="sig-paren">(</span><em>logger=None</em>, <em>level=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertLogs" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>logger</em> かその子ロガーのうちの1つに、少なくとも1つのログメッセージが少なくとも与えられた <em>level</em> で出力されることをテストするコンテキストマネージャです。</p>
<p><em>logger</em> が与えられた場合、 <a class="reference internal" href="logging.html#logging.Logger" title="logging.Logger"><code class="xref py py-class docutils literal"><span class="pre">logging.Logger</span></code></a> オブジェクトもしくはロガーの名前である <a class="reference internal" href="stdtypes.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> であるべきです。
デフォルトはルートロガーで、これは全てのメッセージを掴まえます。</p>
<p><em>level</em> が与えられた場合、ログレベルを表す数値もしくはそれに相当する文字列 (例えば <code class="docutils literal"><span class="pre">&quot;ERROR&quot;</span></code> もしくは <code class="xref py py-attr docutils literal"><span class="pre">logging.ERROR</span></code>) であるべきです。
デフォルトは <code class="xref py py-attr docutils literal"><span class="pre">logging.INFO</span></code> です。</p>
<p><code class="docutils literal"><span class="pre">with</span></code> ブロック内で出たメッセージの少なくとも一つが <em>logger</em> および <em>level</em> 条件に合っている場合、このテストをパスします。それ以外の場合は失敗です。</p>
<p>コンテキストマネージャから返されるオブジェクトは、条件に該当するログメッセージを追跡し続ける記録のためのヘルパーです。
このオブジェクトには2つの属性があります:</p>
<dl class="attribute">
<dt id="unittest.TestCase.records">
<code class="descname">records</code><a class="headerlink" href="#unittest.TestCase.records" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>該当するログメッセージを表す <a class="reference internal" href="logging.html#logging.LogRecord" title="logging.LogRecord"><code class="xref py py-class docutils literal"><span class="pre">logging.LogRecord</span></code></a> オブジェクトのリスト。</p>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestCase.output">
<code class="descname">output</code><a class="headerlink" href="#unittest.TestCase.output" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>該当するメッセージ出力をフォーマットした <a class="reference internal" href="stdtypes.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> オブジェクトのリスト。</p>
</dd></dl>

<p>以下はプログラム例です:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertLogs</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;INFO&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
   <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;first message&#39;</span><span class="p">)</span>
   <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;foo.bar&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;second message&#39;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;INFO:foo:first message&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;ERROR:foo.bar:second message&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.4 で追加.</span></p>
</div>
</dd></dl>

<p>より具体的な確認を行うために以下のメソッドが用意されています:</p>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="38%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><p class="first last">メソッド</p>
</th>
<th class="head"><p class="first last">確認事項</p>
</th>
<th class="head"><p class="first last">初出</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertAlmostEqual" title="unittest.TestCase.assertAlmostEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertAlmostEqual(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">round(a-b,</span> <span class="pre">7)</span> <span class="pre">==</span> <span class="pre">0</span></code></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertNotAlmostEqual" title="unittest.TestCase.assertNotAlmostEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertNotAlmostEqual(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">round(a-b,</span> <span class="pre">7)</span> <span class="pre">!=</span> <span class="pre">0</span></code></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertGreater" title="unittest.TestCase.assertGreater"><code class="xref py py-meth docutils literal"><span class="pre">assertGreater(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">a</span> <span class="pre">&gt;</span> <span class="pre">b</span></code></td>
<td>3.1</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertGreaterEqual" title="unittest.TestCase.assertGreaterEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertGreaterEqual(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">a</span> <span class="pre">&gt;=</span> <span class="pre">b</span></code></td>
<td>3.1</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertLess" title="unittest.TestCase.assertLess"><code class="xref py py-meth docutils literal"><span class="pre">assertLess(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">b</span></code></td>
<td>3.1</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertLessEqual" title="unittest.TestCase.assertLessEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertLessEqual(a,</span> <span class="pre">b)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">a</span> <span class="pre">&lt;=</span> <span class="pre">b</span></code></td>
<td>3.1</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertRegex" title="unittest.TestCase.assertRegex"><code class="xref py py-meth docutils literal"><span class="pre">assertRegex(s,</span> <span class="pre">r)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">r.search(s)</span></code></td>
<td>3.1</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertNotRegex" title="unittest.TestCase.assertNotRegex"><code class="xref py py-meth docutils literal"><span class="pre">assertNotRegex(s,</span> <span class="pre">r)</span></code></a></td>
<td><code class="docutils literal"><span class="pre">not</span> <span class="pre">r.search(s)</span></code></td>
<td>3.2</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertCountEqual" title="unittest.TestCase.assertCountEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertCountEqual(a,</span> <span class="pre">b)</span></code></a></td>
<td><p class="first last"><em>a</em> と <em>b</em> に、順番によらず同じ要素が同じ数だけある</p>
</td>
<td>3.2</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="unittest.TestCase.assertAlmostEqual">
<code class="descname">assertAlmostEqual</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>places=7</em>, <em>msg=None</em>, <em>delta=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertAlmostEqual" title="この定義へのパーマリンク">¶</a></dt>
<dt id="unittest.TestCase.assertNotAlmostEqual">
<code class="descname">assertNotAlmostEqual</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>places=7</em>, <em>msg=None</em>, <em>delta=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertNotAlmostEqual" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>first</em> と <em>second</em> が近似的に等しい (等しくない) ことをテストします。これは、<em>places</em> (デフォルト7) で指定した小数位で丸めた差分をゼロと比較することで行われます。これらのメソッドは (<a class="reference internal" href="functions.html#round" title="round"><code class="xref py py-func docutils literal"><span class="pre">round()</span></code></a> と同様に) <em>小数位</em> を指定するのであって、<em>有効桁数</em> を指定するのではないことに注意してください。</p>
<p><em>places</em> の代わりに <em>delta</em> が渡された場合には、<em>first</em> と <em>second</em> の差分が <em>delta</em> 以下 (以上) であることをテストします。</p>
<p><em>delta</em> と <em>places</em> の両方が指定された場合は <code class="docutils literal"><span class="pre">TypeError</span></code> が投げられます。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.2 で変更: </span><a class="reference internal" href="#unittest.TestCase.assertAlmostEqual" title="unittest.TestCase.assertAlmostEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertAlmostEqual()</span></code></a> は、オブジェクトが等しい場合には自動で近似的に等しいとみなすようになりました。 <a class="reference internal" href="#unittest.TestCase.assertNotAlmostEqual" title="unittest.TestCase.assertNotAlmostEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertNotAlmostEqual()</span></code></a> は、オブジェクトが等しい場合には自動的に失敗するようになりました。 <em>delta</em> 引数が追加されました。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertGreater">
<code class="descname">assertGreater</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertGreater" title="この定義へのパーマリンク">¶</a></dt>
<dt id="unittest.TestCase.assertGreaterEqual">
<code class="descname">assertGreaterEqual</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertGreaterEqual" title="この定義へのパーマリンク">¶</a></dt>
<dt id="unittest.TestCase.assertLess">
<code class="descname">assertLess</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertLess" title="この定義へのパーマリンク">¶</a></dt>
<dt id="unittest.TestCase.assertLessEqual">
<code class="descname">assertLessEqual</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertLessEqual" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>first</em> が <em>second</em> と比べて、メソッド名に対応して &gt;, &gt;=, &lt; もしくは &lt;= であることをテストします。そうでない場合はテストは失敗です:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">assertGreaterEqual</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">AssertionError: &quot;3&quot; unexpectedly not greater than or equal to &quot;4&quot;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertRegex">
<code class="descname">assertRegex</code><span class="sig-paren">(</span><em>text</em>, <em>regex</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertRegex" title="この定義へのパーマリンク">¶</a></dt>
<dt id="unittest.TestCase.assertNotRegex">
<code class="descname">assertNotRegex</code><span class="sig-paren">(</span><em>text</em>, <em>regex</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertNotRegex" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>regex</em> の検索が <em>text</em> とマッチする (またはマッチしない) ことをテストします。テスト失敗時には、エラーメッセージにパターンと <em>text</em> が表示されます（もしくは、パターンと意図しないかたちでマッチした <em>text</em> の一部が表示されます）。 <em>regex</em> は正規表現オブジェクトか、 <a class="reference internal" href="re.html#re.search" title="re.search"><code class="xref py py-func docutils literal"><span class="pre">re.search()</span></code></a> が扱える正規表現が書かれた文字列である必要があります。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加: </span><code class="docutils literal"><span class="pre">assertRegexpMatches</span></code> という名前で追加されました。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.2 で変更: </span>メソッド <code class="docutils literal"><span class="pre">assertRegexpMatches()</span></code> は <a class="reference internal" href="#unittest.TestCase.assertRegex" title="unittest.TestCase.assertRegex"><code class="xref py py-meth docutils literal"><span class="pre">assertRegex()</span></code></a> にリネームされました。</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加: </span><a class="reference internal" href="#unittest.TestCase.assertNotRegex" title="unittest.TestCase.assertNotRegex"><code class="xref py py-meth docutils literal"><span class="pre">assertNotRegex()</span></code></a>。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertCountEqual">
<code class="descname">assertCountEqual</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertCountEqual" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>シーケンス <em>first</em> が <em>second</em> と同じ要素を含んでいることをテストします。要素の順序はテスト結果に影響しません。要素が含まれていない場合には、シーケンスの差分がエラーメッセージとして表示されます。</p>
<p><em>first</em> と <em>second</em> の比較では、重複した要素は無視 <em>されません</em>。両者に同じ数の要素が含まれていることを検証します。このメソッドは <code class="docutils literal"><span class="pre">assertEqual(Counter(list(first)),</span> <span class="pre">Counter(list(second)))</span></code> と同等に振る舞うことに加えて、ハッシュ化できないオブジェクトのシーケンスでも動作します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加.</span></p>
</div>
</dd></dl>

<p id="type-specific-methods"><a class="reference internal" href="#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertEqual()</span></code></a> メソッドは、同じ型のオブジェクトの等価性確認のために、型ごとに特有のメソッドにディスパッチします。これらのメソッドは、ほとんどの組み込み型用のメソッドは既に実装されています。さらに、 <a class="reference internal" href="#unittest.TestCase.addTypeEqualityFunc" title="unittest.TestCase.addTypeEqualityFunc"><code class="xref py py-meth docutils literal"><span class="pre">addTypeEqualityFunc()</span></code></a> を使う事で新たなメソッドを登録することができます:</p>
<dl class="method">
<dt id="unittest.TestCase.addTypeEqualityFunc">
<code class="descname">addTypeEqualityFunc</code><span class="sig-paren">(</span><em>typeobj</em>, <em>function</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.addTypeEqualityFunc" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertEqual()</span></code></a> で呼び出される型特有のメソッドを登録します。登録するメソッドは、比較する2つのオブジェクトの型が厳密に <em>typeobj</em> と同じ (サブクラスでもいけません) の場合に等価性を確認します。 <em>function</em>  は <a class="reference internal" href="#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertEqual()</span></code></a> と同様に、2つの位置固定引数と、3番目に msg=None のキーワード引数を取れる必要があります。このメソッドは、始めの2つに指定したパラメータ間の差分を検出した時に <a class="reference internal" href="#unittest.TestCase.failureException" title="unittest.TestCase.failureException"><code class="xref py py-data docutils literal"><span class="pre">self.failureException(msg)</span></code></a> の例外を投げる必要があります。この例外を投げる際は、出来る限り、エラーの内容が分かる有用な情報と差分の詳細をエラーメッセージに含めてください。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<p><a class="reference internal" href="#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertEqual()</span></code></a> が自動的に呼び出す型特有のメソッドの概要を以下の表示に記載しています。これらのメソッドは通常は直接呼び出す必要がないことに注意が必要です。</p>
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="35%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><p class="first last">メソッド</p>
</th>
<th class="head"><p class="first last">比較の対象</p>
</th>
<th class="head"><p class="first last">初出</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertMultiLineEqual" title="unittest.TestCase.assertMultiLineEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertMultiLineEqual(a,</span> <span class="pre">b)</span></code></a></td>
<td><p class="first last">文字列</p>
</td>
<td>3.1</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertSequenceEqual" title="unittest.TestCase.assertSequenceEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertSequenceEqual(a,</span> <span class="pre">b)</span></code></a></td>
<td><p class="first last">シーケンス</p>
</td>
<td>3.1</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertListEqual" title="unittest.TestCase.assertListEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertListEqual(a,</span> <span class="pre">b)</span></code></a></td>
<td><p class="first last">リスト</p>
</td>
<td>3.1</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertTupleEqual" title="unittest.TestCase.assertTupleEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertTupleEqual(a,</span> <span class="pre">b)</span></code></a></td>
<td><p class="first last">タプル</p>
</td>
<td>3.1</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertSetEqual" title="unittest.TestCase.assertSetEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertSetEqual(a,</span> <span class="pre">b)</span></code></a></td>
<td><p class="first last">set または frozenset</p>
</td>
<td>3.1</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertDictEqual" title="unittest.TestCase.assertDictEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertDictEqual(a,</span> <span class="pre">b)</span></code></a></td>
<td><p class="first last">辞書</p>
</td>
<td>3.1</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="unittest.TestCase.assertMultiLineEqual">
<code class="descname">assertMultiLineEqual</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertMultiLineEqual" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>複数行の文字列 <em>first</em> が文字列 <em>second</em> と等しいことをテストします。等しくない場合には、両者の差分がハイライトされてエラーメッセージに表示されます。このメソッドは、デフォルトで、 <a class="reference internal" href="#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertEqual()</span></code></a> が string を比較するときに自動的に使用します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertSequenceEqual">
<code class="descname">assertSequenceEqual</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em>, <em>seq_type=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertSequenceEqual" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>2つのシーケンスが等しいことをテストします。<em>seq_type</em> が指定された場合、<em>first</em> と <em>second</em> が <em>seq_type</em> のインスタンスで無い場合にはテストが失敗します。シーケンスどうしが異なる場合には、両者の差分がエラーメッセージに表示されます。</p>
<p>このメソッドは直接 <a class="reference internal" href="#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertEqual()</span></code></a> からは呼ばれませんが、 <a class="reference internal" href="#unittest.TestCase.assertListEqual" title="unittest.TestCase.assertListEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertListEqual()</span></code></a> と <a class="reference internal" href="#unittest.TestCase.assertTupleEqual" title="unittest.TestCase.assertTupleEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertTupleEqual()</span></code></a> の実装で使われています。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertListEqual">
<code class="descname">assertListEqual</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertListEqual" title="この定義へのパーマリンク">¶</a></dt>
<dt id="unittest.TestCase.assertTupleEqual">
<code class="descname">assertTupleEqual</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertTupleEqual" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>2つのリストまたはタプルが等しいかどうかをテストします。等しくない場合には、両者の差分を表示します。2つのパラメータの型が異なる場合にはテストがエラーになります。このメソッドは、デフォルトで、 <a class="reference internal" href="#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertEqual()</span></code></a> が list または tuple を比較するときに自動的に使用します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertSetEqual">
<code class="descname">assertSetEqual</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertSetEqual" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>2つのセットが等しいかどうかをテストします。等しくない場合には、両者の差分を表示します。このメソッドは、デフォルトで、 <a class="reference internal" href="#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertEqual()</span></code></a> が set もしくは frozenset を比較するときに自動的に使用します。</p>
<p><em>first</em> or <em>second</em> のいずれかに <a class="reference internal" href="stdtypes.html#set.difference" title="set.difference"><code class="xref py py-meth docutils literal"><span class="pre">set.difference()</span></code></a> が無い場合にはテストは失敗します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.assertDictEqual">
<code class="descname">assertDictEqual</code><span class="sig-paren">(</span><em>first</em>, <em>second</em>, <em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.assertDictEqual" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>2つの辞書が等しいかどうかをテストします。等しくない場合には、両者の差分を表示します。このメソッドは、デフォルトで、 <a class="reference internal" href="#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertEqual()</span></code></a> が dict を比較するときに自動的に使用します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<p id="other-methods-and-attrs">最後に、 <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> の残りのメソッドと属性を紹介します:</p>
<dl class="method">
<dt id="unittest.TestCase.fail">
<code class="descname">fail</code><span class="sig-paren">(</span><em>msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.fail" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>無条件にテストを失敗させます。エラーメッセージの表示に、<em>msg</em> または <code class="docutils literal"><span class="pre">None</span></code> が使われます。</p>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestCase.failureException">
<code class="descname">failureException</code><a class="headerlink" href="#unittest.TestCase.failureException" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="test.html#module-test" title="test: Regression tests package containing the testing suite for Python."><code class="xref py py-meth docutils literal"><span class="pre">test()</span></code></a> メソッドが送出する例外を指定するクラス属性です。例えばテストフレームワークで追加情報を付した特殊な例外が必要になる場合、この例外のサブクラスとして作成します。この属性の初期値は <a class="reference internal" href="exceptions.html#AssertionError" title="AssertionError"><code class="xref py py-exc docutils literal"><span class="pre">AssertionError</span></code></a> です。</p>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestCase.longMessage">
<code class="descname">longMessage</code><a class="headerlink" href="#unittest.TestCase.longMessage" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このクラス属性は、失敗した assertXYY の呼び出しで独自の失敗時のメッセージが msg 引数として渡されていたときにどうするかを決定します。
<code class="docutils literal"><span class="pre">True</span></code> がデフォルト値です。
この場合、標準の失敗時のメッセージの後に独自のメッセージが追記されます。
<code class="docutils literal"><span class="pre">False</span></code> に設定したときは、標準のメッセージを独自のメッセージで置き換えます。</p>
<p>アサートメソッドを呼び出す前に、個別のテストメソッドの中でインスタンス属性 self.longMessage を <code class="docutils literal"><span class="pre">True</span></code> または <code class="docutils literal"><span class="pre">False</span></code> に設定して、この設定を上書きできます。</p>
<p>このクラスの設定はそれぞれのテストを呼び出す前にリセットされます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestCase.maxDiff">
<code class="descname">maxDiff</code><a class="headerlink" href="#unittest.TestCase.maxDiff" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>この属性は、アサーションメソッドが失敗をレポートする時に表示する差分の長さをコントロールします。デフォルトは 80*8 文字です。この属性が影響するメソッドは、 <a class="reference internal" href="#unittest.TestCase.assertSequenceEqual" title="unittest.TestCase.assertSequenceEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertSequenceEqual()</span></code></a> (およびこのメソッドに委譲するシーケンス比較メソッド)、 <a class="reference internal" href="#unittest.TestCase.assertDictEqual" title="unittest.TestCase.assertDictEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertDictEqual()</span></code></a> と <a class="reference internal" href="#unittest.TestCase.assertMultiLineEqual" title="unittest.TestCase.assertMultiLineEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertMultiLineEqual()</span></code></a> です。</p>
<p><code class="docutils literal"><span class="pre">maxDiff</span></code> を <code class="docutils literal"><span class="pre">None</span></code> に設定すると差分表示の上限がなくなります。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加.</span></p>
</div>
</dd></dl>

<p>テストフレームワークは、テスト情報を収集するために以下のメソッドを使用します:</p>
<dl class="method">
<dt id="unittest.TestCase.countTestCases">
<code class="descname">countTestCases</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.countTestCases" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストオブジェクトに含まれるテストの数を返します。 <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> インスタンスは常に <code class="docutils literal"><span class="pre">1</span></code> を返します。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.defaultTestResult">
<code class="descname">defaultTestResult</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.defaultTestResult" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このテストケースクラスで使われるテスト結果クラスのインスタンスを (もし <a class="reference internal" href="#unittest.TestCase.run" title="unittest.TestCase.run"><code class="xref py py-meth docutils literal"><span class="pre">run()</span></code></a> メソッドに他の結果インスタンスが提供されないならば) 返します。</p>
<p><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> インスタンスに対しては、いつも <a class="reference internal" href="#unittest.TestResult" title="unittest.TestResult"><code class="xref py py-class docutils literal"><span class="pre">TestResult</span></code></a> のインスタンスですので、 <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> のサブクラスでは必要に応じてこのメソッドをオーバライドしてください。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.id">
<code class="descname">id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.id" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストケースを特定する文字列を返します。通常、<em>id</em> はモジュール名・クラス名を含む、テストメソッドのフルネームを指定します。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.shortDescription">
<code class="descname">shortDescription</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.shortDescription" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストの説明を一行分、または説明がない場合には <code class="docutils literal"><span class="pre">None</span></code> を返します。デフォルトでは、テストメソッドの docstring の先頭の一行、または <code class="docutils literal"><span class="pre">None</span></code> を返します。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.1 で変更: </span>3.1で docstring があったとしても、返される短い説明文字列にテスト名が付けられるようになりました。
この変更によって unittest 拡張に互換性の問題が発生し、 Python 3.2 でテスト名が追加される場所は <a class="reference internal" href="#unittest.TextTestResult" title="unittest.TextTestResult"><code class="xref py py-class docutils literal"><span class="pre">TextTestResult</span></code></a> へ移動しました。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.addCleanup">
<code class="descname">addCleanup</code><span class="sig-paren">(</span><em>function</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.addCleanup" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestCase.tearDown" title="unittest.TestCase.tearDown"><code class="xref py py-meth docutils literal"><span class="pre">tearDown()</span></code></a> の後に呼び出される関数を追加します。この関数はリソースのクリーンアップのために使用します。追加された関数は、追加された順と逆の順番で呼び出されます（<abbr title="last-in, first-out">LIFO</abbr>）。 <a class="reference internal" href="#unittest.TestCase.addCleanup" title="unittest.TestCase.addCleanup"><code class="xref py py-meth docutils literal"><span class="pre">addCleanup()</span></code></a> に渡された引数とキーワード引数が追加された関数にも渡されます。</p>
<p><a class="reference internal" href="#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal"><span class="pre">setUp()</span></code></a> が失敗した場合、つまり <a class="reference internal" href="#unittest.TestCase.tearDown" title="unittest.TestCase.tearDown"><code class="xref py py-meth docutils literal"><span class="pre">tearDown()</span></code></a> が呼ばれなかった場合でも、追加されたクリーンアップ関数は呼び出されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestCase.doCleanups">
<code class="descname">doCleanups</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestCase.doCleanups" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このメソッドは、 <a class="reference internal" href="#unittest.TestCase.tearDown" title="unittest.TestCase.tearDown"><code class="xref py py-meth docutils literal"><span class="pre">tearDown()</span></code></a> の後、もしくは、 <a class="reference internal" href="#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal"><span class="pre">setUp()</span></code></a> が例外を投げた場合は <a class="reference internal" href="#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal"><span class="pre">setUp()</span></code></a> の後に、無条件で呼ばれます。</p>
<p>このメソッドは、 <a class="reference internal" href="#unittest.TestCase.addCleanup" title="unittest.TestCase.addCleanup"><code class="xref py py-meth docutils literal"><span class="pre">addCleanup()</span></code></a> で追加された関数を呼び出す責務を担います。もし、クリーンアップ関数を <a class="reference internal" href="#unittest.TestCase.tearDown" title="unittest.TestCase.tearDown"><code class="xref py py-meth docutils literal"><span class="pre">tearDown()</span></code></a> より前に呼び出す必要がある場合には、 <a class="reference internal" href="#unittest.TestCase.doCleanups" title="unittest.TestCase.doCleanups"><code class="xref py py-meth docutils literal"><span class="pre">doCleanups()</span></code></a> を明示的に呼び出してください。</p>
<p><a class="reference internal" href="#unittest.TestCase.doCleanups" title="unittest.TestCase.doCleanups"><code class="xref py py-meth docutils literal"><span class="pre">doCleanups()</span></code></a> は、どこで呼び出されても、クリーンアップ関数をスタックから削除して実行します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="unittest.FunctionTestCase">
<em class="property">class </em><code class="descclassname">unittest.</code><code class="descname">FunctionTestCase</code><span class="sig-paren">(</span><em>testFunc</em>, <em>setUp=None</em>, <em>tearDown=None</em>, <em>description=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.FunctionTestCase" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このクラスでは <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> インターフェースの内、テストランナーがテストを実行するためのインターフェースだけを実装しており、テスト結果のチェックやレポートに関するメソッドは実装していません。既存のテストコードを <a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> によるテストフレームワークに組み込むために使用します。</p>
</dd></dl>

<div class="section" id="deprecated-aliases">
<span id="id1"></span><h4>26.4.8.1.1. 非推奨のエイリアス<a class="headerlink" href="#deprecated-aliases" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>歴史的な経緯で、 <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> のいくつかのエイリアスは非推奨となりました。以下の表に、非推奨のエイリアスをまとめます:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="30%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><p class="first last">メソッド名</p>
</th>
<th class="head"><p class="first last">非推奨のエイリアス</p>
</th>
<th class="head"><p class="first last">非推奨のエイリアス</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertEqual()</span></code></a></td>
<td>failUnlessEqual</td>
<td>assertEquals</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertNotEqual" title="unittest.TestCase.assertNotEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertNotEqual()</span></code></a></td>
<td>failIfEqual</td>
<td>assertNotEquals</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertTrue" title="unittest.TestCase.assertTrue"><code class="xref py py-meth docutils literal"><span class="pre">assertTrue()</span></code></a></td>
<td>failUnless</td>
<td>assert_</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertFalse" title="unittest.TestCase.assertFalse"><code class="xref py py-meth docutils literal"><span class="pre">assertFalse()</span></code></a></td>
<td>failIf</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertRaises" title="unittest.TestCase.assertRaises"><code class="xref py py-meth docutils literal"><span class="pre">assertRaises()</span></code></a></td>
<td>failUnlessRaises</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertAlmostEqual" title="unittest.TestCase.assertAlmostEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertAlmostEqual()</span></code></a></td>
<td>failUnlessAlmostEqual</td>
<td>assertAlmostEquals</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertNotAlmostEqual" title="unittest.TestCase.assertNotAlmostEqual"><code class="xref py py-meth docutils literal"><span class="pre">assertNotAlmostEqual()</span></code></a></td>
<td>failIfAlmostEqual</td>
<td>assertNotAlmostEquals</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#unittest.TestCase.assertRegex" title="unittest.TestCase.assertRegex"><code class="xref py py-meth docutils literal"><span class="pre">assertRegex()</span></code></a></td>
<td>&nbsp;</td>
<td>assertRegexpMatches</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#unittest.TestCase.assertRaisesRegex" title="unittest.TestCase.assertRaisesRegex"><code class="xref py py-meth docutils literal"><span class="pre">assertRaisesRegex()</span></code></a></td>
<td>&nbsp;</td>
<td>assertRaisesRegexp</td>
</tr>
</tbody>
</table>
<div class="deprecated">
<p><span class="versionmodified">バージョン 3.1 で撤廃: </span>2列目に記載されている fail* エイリアス。</p>
</div>
<div class="deprecated">
<p><span class="versionmodified">バージョン 3.2 で撤廃: </span>3列目に記載されている assert* エイリアス。</p>
</div>
<div class="deprecated">
<p><span class="versionmodified">バージョン 3.2 で撤廃: </span><code class="docutils literal"><span class="pre">assertRegexpMatches</span></code> と <code class="docutils literal"><span class="pre">assertRaisesRegexp</span></code> は <a class="reference internal" href="#unittest.TestCase.assertRegex" title="unittest.TestCase.assertRegex"><code class="xref py py-meth docutils literal"><span class="pre">assertRegex()</span></code></a> と <a class="reference internal" href="#unittest.TestCase.assertRaisesRegex" title="unittest.TestCase.assertRaisesRegex"><code class="xref py py-meth docutils literal"><span class="pre">assertRaisesRegex()</span></code></a> にリネームされました</p>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="grouping-tests">
<span id="testsuite-objects"></span><h3>26.4.8.2. テストのグループ化<a class="headerlink" href="#grouping-tests" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl class="class">
<dt id="unittest.TestSuite">
<em class="property">class </em><code class="descclassname">unittest.</code><code class="descname">TestSuite</code><span class="sig-paren">(</span><em>tests=()</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestSuite" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このクラスは、個々のテストケースやテストスイートの集合を表現しています。
通常のテストケースと同じようにテストランナーで実行するためのインタフェースを備えています。 <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> インスタンスを実行することはスイートをイテレートして得られる個々のテストを実行することと同じです。</p>
<p>引数 <em>tests</em> が指定された場合、それはテストケースに亘る繰り返し可能オブジェクトまたは内部でスイートを組み立てるための他のテストスイートでなければなりません。後からテストケースやスイートをコレクションに付け加えるためのメソッドも提供されています。</p>
<p><a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> は <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> オブジェクトのように振る舞います。違いは、スイートにはテストを実装しない点にあります。代わりに、テストをまとめてグループ化して、同時に実行します。 <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> のインスタンスにテスト追加するためのメソッドが用意されています:</p>
<dl class="method">
<dt id="unittest.TestSuite.addTest">
<code class="descname">addTest</code><span class="sig-paren">(</span><em>test</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestSuite.addTest" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> 又は <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> のインスタンスをスイートに追加します。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestSuite.addTests">
<code class="descname">addTests</code><span class="sig-paren">(</span><em>tests</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestSuite.addTests" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>イテラブル <em>tests</em> に含まれる全ての <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> 又は <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> のインスタンスをスイートに追加します。</p>
<p>このメソッドは <em>tests</em> 上のイテレーションをしながらそれぞれの要素に <a class="reference internal" href="#unittest.TestSuite.addTest" title="unittest.TestSuite.addTest"><code class="xref py py-meth docutils literal"><span class="pre">addTest()</span></code></a> を呼び出すのと等価です。</p>
</dd></dl>

<p><a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> クラスは <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> と以下のメソッドを共有します:</p>
<dl class="method">
<dt id="unittest.TestSuite.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>result</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestSuite.run" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>スイート内のテストを実行し、結果を <em>result</em> で指定した結果オブジェクトに収集します。 <a class="reference internal" href="#unittest.TestCase.run" title="unittest.TestCase.run"><code class="xref py py-meth docutils literal"><span class="pre">TestCase.run()</span></code></a> と異なり、 <a class="reference internal" href="#unittest.TestSuite.run" title="unittest.TestSuite.run"><code class="xref py py-meth docutils literal"><span class="pre">TestSuite.run()</span></code></a> では必ず結果オブジェクトを指定する必要があります。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestSuite.debug">
<code class="descname">debug</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestSuite.debug" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このスイートに関連づけられたテストを結果を収集せずに実行します。これによりテストで送出された例外は呼び出し元に伝わるようになり、デバッガの下でのテスト実行をサポートできるようになります。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestSuite.countTestCases">
<code class="descname">countTestCases</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestSuite.countTestCases" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このテストオブジェクトによって表現されるテストの数を返します。これには個別のテストと下位のスイートも含まれます。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestSuite.__iter__">
<code class="descname">__iter__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestSuite.__iter__" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> でグループ化されたテストは反復アクセスできます。
サブクラスは <a class="reference internal" href="#unittest.TestSuite.__iter__" title="unittest.TestSuite.__iter__"><code class="xref py py-meth docutils literal"><span class="pre">__iter__()</span></code></a> をオーバーライドすることで、遅延処理でテストを提供できます。
1つのスイート内でこのメソッドは何度も呼ばれる可能性があることに注意してください (例えば、テスト数のカウントや等価性の比較)。
そのため、 <a class="reference internal" href="#unittest.TestSuite.run" title="unittest.TestSuite.run"><code class="xref py py-meth docutils literal"><span class="pre">TestSuite.run()</span></code></a> を実行する前に反復アクセスを何度繰り返しても同じテスト群を返すようにしなければなりません。
呼び出し側が <code class="xref py py-meth docutils literal"><span class="pre">TestSuite._removeTestAtIndex()</span></code> をオーバーライドしたサブクラスを使いテストへの参照を保存していない限り、 <a class="reference internal" href="#unittest.TestSuite.run" title="unittest.TestSuite.run"><code class="xref py py-meth docutils literal"><span class="pre">TestSuite.run()</span></code></a> を実行した後はこのメソッドが返すテスト群を信頼すべきではありません。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.2 で変更: </span>以前のバージョンでは <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> はイテレータではなく、直接テストにアクセスしていました。そのため、 <a class="reference internal" href="#unittest.TestSuite.__iter__" title="unittest.TestSuite.__iter__"><code class="xref py py-meth docutils literal"><span class="pre">__iter__()</span></code></a> をオーバーラードしてもテストにアクセスできませんでした。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.4 で変更: </span>以前のバージョンでは、 <a class="reference internal" href="#unittest.TestSuite.run" title="unittest.TestSuite.run"><code class="xref py py-meth docutils literal"><span class="pre">TestSuite.run()</span></code></a> の実行後は <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> が各 <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> への参照を保持していました。
サブクラスで <code class="xref py py-meth docutils literal"><span class="pre">TestSuite._removeTestAtIndex()</span></code> をオーバーライドすることでこの振る舞いを復元できます。</p>
</div>
</dd></dl>

<p>通常、 <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> の <a class="reference internal" href="#unittest.TestSuite.run" title="unittest.TestSuite.run"><code class="xref py py-meth docutils literal"><span class="pre">run()</span></code></a> メソッドは <code class="xref py py-class docutils literal"><span class="pre">TestRunner</span></code> が起動するため、ユーザが直接実行する必要はありません。</p>
</dd></dl>

</div>
<div class="section" id="loading-and-running-tests">
<h3>26.4.8.3. テストのロードと起動<a class="headerlink" href="#loading-and-running-tests" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl class="class">
<dt id="unittest.TestLoader">
<em class="property">class </em><code class="descclassname">unittest.</code><code class="descname">TestLoader</code><a class="headerlink" href="#unittest.TestLoader" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestLoader" title="unittest.TestLoader"><code class="xref py py-class docutils literal"><span class="pre">TestLoader</span></code></a> クラスはクラスとモジュールからテストスイートを生成します。通常、このクラスのインスタンスを明示的に生成する必要はありません。 <a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> モジュールの <a class="reference internal" href="#unittest.defaultTestLoader" title="unittest.defaultTestLoader"><code class="xref py py-data docutils literal"><span class="pre">unittest.defaultTestLoader</span></code></a> を共用インスタンスとして使用することができます。 しかし、このクラスのサブクラスやインスタンスで、属性をカスタマイズすることができます。</p>
<p><a class="reference internal" href="#unittest.TestLoader" title="unittest.TestLoader"><code class="xref py py-class docutils literal"><span class="pre">TestLoader</span></code></a> オブジェクトには以下の属性があります:</p>
<dl class="attribute">
<dt id="unittest.TestLoader.errors">
<code class="descname">errors</code><a class="headerlink" href="#unittest.TestLoader.errors" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストの読み込み中に起きた致命的でないエラーのリストです。
どの時点でもローダーからリセットされることはありません。
致命的なエラーは適切なメソッドが例外を送出して、呼び出し元に通知します。
致命的でないエラーも、実行したときのエラーを総合テストが通知してくれます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.5 で追加.</span></p>
</div>
</dd></dl>

<p><a class="reference internal" href="#unittest.TestLoader" title="unittest.TestLoader"><code class="xref py py-class docutils literal"><span class="pre">TestLoader</span></code></a> のオブジェクトには以下のメソッドがあります:</p>
<dl class="method">
<dt id="unittest.TestLoader.loadTestsFromTestCase">
<code class="descname">loadTestsFromTestCase</code><span class="sig-paren">(</span><em>testCaseClass</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestLoader.loadTestsFromTestCase" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> の派生クラス <code class="xref py py-class docutils literal"><span class="pre">testCaseClass</span></code> に含まれる全テストケースのスイートを返します。</p>
<p><a class="reference internal" href="#unittest.TestLoader.getTestCaseNames" title="unittest.TestLoader.getTestCaseNames"><code class="xref py py-meth docutils literal"><span class="pre">getTestCaseNames()</span></code></a> で指定されたメソッドに対し、テストケースインスタンスが作成されます。
デフォルトでは <code class="docutils literal"><span class="pre">test</span></code> で始まる名前のメソッド群です。
<a class="reference internal" href="#unittest.TestLoader.getTestCaseNames" title="unittest.TestLoader.getTestCaseNames"><code class="xref py py-meth docutils literal"><span class="pre">getTestCaseNames()</span></code></a> がメソッド名を返さなかったが、 <code class="xref py py-meth docutils literal"><span class="pre">runTest()</span></code> メソッドが実装されている場合は、そのメソッドに対するテストケースが代わりに作成されます。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestLoader.loadTestsFromModule">
<code class="descname">loadTestsFromModule</code><span class="sig-paren">(</span><em>module</em>, <em>pattern=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestLoader.loadTestsFromModule" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定したモジュールに含まれる全テストケースのスイートを返します。このメソッドは <em>module</em> 内の <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> 派生クラスを検索し、見つかったクラスのテストメソッドごとにクラスのインスタンスを作成します。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last"><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> クラスを基底クラスとしてクラス階層を構築するとテストフィクスチャや補助的な関数をうまく共用することができますが、基底クラスに直接インスタンス化できないテストメソッドがあると、この <code class="xref py py-meth docutils literal"><span class="pre">loadTestsFromModule()</span></code> を使うことができません。この場合でも、 fixture が全て別々で定義がサブクラスにある場合は使用することができます。</p>
</div>
<p>モジュールが <code class="docutils literal"><span class="pre">load_tests</span></code> 関数を用意している場合、この関数がテストの読み込みに使われます。
これによりテストの読み込み処理がカスタマイズできます。
これが <a class="reference internal" href="#load-tests-protocol">load_tests プロトコル</a> です。
<em>pattern</em> 引数は <code class="docutils literal"><span class="pre">load_tests</span></code> に第3引数として渡されます。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.2 で変更: </span><code class="docutils literal"><span class="pre">load_tests</span></code> のサポートが追加されました。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.5 で変更: </span>ドキュメントにない、非公式の <em>use_load_tests</em> デフォルト引数は非推奨で、後方互換性のために残されていますが無視されます。
また、このメソッドはキーワード専用引数 <em>pattern</em> を受け取るようになりました。これは <code class="docutils literal"><span class="pre">load_tests</span></code> の第三引数に渡されます。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestLoader.loadTestsFromName">
<code class="descname">loadTestsFromName</code><span class="sig-paren">(</span><em>name</em>, <em>module=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestLoader.loadTestsFromName" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>文字列で指定される全テストケースを含むスイートを返します。</p>
<p><em>name</em> には &#8220;ドット修飾名&#8221; でモジュールかテストケースクラス、テストケースクラス内のメソッド、 <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> インスタンスまたは <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> か <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> のインスタンスを返す呼び出し可能オブジェクトを指定します。このチェックはここで挙げた順番に行なわれます。すなわち、候補テストケースクラス内のメソッドは「呼び出し可能オブジェクト」としてではなく「テストケースクラス内のメソッド」として拾い出されます。</p>
<p>例えば <code class="xref py py-mod docutils literal"><span class="pre">SampleTests</span></code> モジュールに <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> から派生した <code class="xref py py-class docutils literal"><span class="pre">SampleTestCase</span></code> クラスがあり、 <code class="xref py py-class docutils literal"><span class="pre">SampleTestCase</span></code> にはテストメソッド <code class="xref py py-meth docutils literal"><span class="pre">test_one()</span></code> ・ <code class="xref py py-meth docutils literal"><span class="pre">test_two()</span></code> ・ <code class="xref py py-meth docutils literal"><span class="pre">test_three()</span></code> があるとします。この場合、 <em>name</em> に <code class="docutils literal"><span class="pre">'SampleTests.SampleTestCase'</span></code> と指定すると、 <code class="xref py py-class docutils literal"><span class="pre">SampleTestCase</span></code> の三つのテストメソッドを実行するテストスイートが作成されます。 <code class="docutils literal"><span class="pre">'SampleTests.SampleTestCase.test_two'</span></code> と指定すれば、 <code class="xref py py-meth docutils literal"><span class="pre">test_two()</span></code> だけを実行するテストスイートが作成されます。インポートされていないモジュールやパッケージ名を含んだ名前を指定した場合は自動的にインポートされます。</p>
<p>また、<em>module</em> を指定した場合、<em>module</em> 内の <em>name</em> を取得します。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.5 で変更: </span><em>name</em> を巡回している間に <a class="reference internal" href="exceptions.html#ImportError" title="ImportError"><code class="xref py py-exc docutils literal"><span class="pre">ImportError</span></code></a> か <a class="reference internal" href="exceptions.html#AttributeError" title="AttributeError"><code class="xref py py-exc docutils literal"><span class="pre">AttributeError</span></code></a> が発生した場合、実行するとその例外を発生させるようなテストを合成して返します。それらのエラーは self.errors に集められます。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestLoader.loadTestsFromNames">
<code class="descname">loadTestsFromNames</code><span class="sig-paren">(</span><em>names</em>, <em>module=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestLoader.loadTestsFromNames" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestLoader.loadTestsFromName" title="unittest.TestLoader.loadTestsFromName"><code class="xref py py-meth docutils literal"><span class="pre">loadTestsFromName()</span></code></a> と同じですが、名前を一つだけ指定するのではなく、複数の名前のシーケンスを指定する事ができます。戻り値は <em>names</em> 中の名前で指定されるテスト全てを含むテストスイートです。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestLoader.getTestCaseNames">
<code class="descname">getTestCaseNames</code><span class="sig-paren">(</span><em>testCaseClass</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestLoader.getTestCaseNames" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>testCaseClass</em> 中の全てのメソッド名を含むソート済みシーケンスを返します。 <em>testCaseClass</em> は <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> のサブクラスでなければなりません。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestLoader.discover">
<code class="descname">discover</code><span class="sig-paren">(</span><em>start_dir</em>, <em>pattern='test*.py'</em>, <em>top_level_dir=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestLoader.discover" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>指定された開始ディレクトリからサブディレクトリに再帰することですべてのテストモジュールを検索し、それらを含む TestSuite オブジェクトを返します。<em>pattern</em> にマッチしたテストファイルだけがロードの対象になります。 (シェルスタイルのパターンマッチングが使われます)。その中で、インポート可能なもジュール (つまり Python の識別子として有効であるということです) がロードされます。</p>
<p>すべてのテストモジュールはプロジェクトのトップレベルからインポート可能である必要があります。開始ディレクトリがトップレベルディレクトリでない場合は、トップレベルディレクトリが分離できなくてはいけません。</p>
<p>シンタックスエラーなどでモジュールのインポートに失敗した場合、エラーが記録され、ディスカバリ自体は続けられます。 import  の失敗が <a class="reference internal" href="#unittest.SkipTest" title="unittest.SkipTest"><code class="xref py py-exc docutils literal"><span class="pre">SkipTest</span></code></a> 例外が発生したためだった場合は、そのモジュールはエラーではなく skip として記録されます。</p>
<p>パッケージ (<code class="file docutils literal"><span class="pre">__init__.py</span></code> という名前のファイルがあるディレクトリ) が見付かった場合、そのパッケージに <code class="docutils literal"><span class="pre">load_tests</span></code> 関数があるかをチェックします。
関数があった場合、次に <code class="docutils literal"><span class="pre">package.load_tests(loader,</span> <span class="pre">tests,</span> <span class="pre">pattern)</span></code> が呼ばれます。
テストの検索の実行では、たとえ load_tests 関数自身が <code class="docutils literal"><span class="pre">loader.discover</span></code> を呼んだとしても、パッケージのチェックは1回のみとなることが保証されています。</p>
<p><code class="docutils literal"><span class="pre">load_tests</span></code> が存在して、ディスカバリがパッケージ内を再帰的な検索を続けている途中で <em>ない</em> 場合、<code class="docutils literal"><span class="pre">load_tests</span></code> はそのパッケージ内の全てのテストをロードする責務を担います。</p>
<p>意図的にパターンはローダの属性として保持されないようになっています。それにより、パッケージが自分自身のディスカバリを続ける事ができます。<em>top_level_dir</em> は保持されるため、<code class="docutils literal"><span class="pre">load_tests</span></code> はこの引数を <code class="docutils literal"><span class="pre">loader.discover()</span></code> に渡す必要はありません。</p>
<p><em>start_dir</em> はドット付のモジュール名でもディレクトリでも構いません。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.4 で変更: </span>インポート時に <a class="reference internal" href="#unittest.SkipTest" title="unittest.SkipTest"><code class="xref py py-exc docutils literal"><span class="pre">SkipTest</span></code></a> を送出するモジュールはエラーではなくスキップとして記録されます。
<a class="reference internal" href="../glossary.html#term-namespace-package"><span class="xref std std-term">名前空間パッケージ</span></a> も検索対象になります。
ファイルシステムの順序がファイル名に従わないとしても実行順序が一定になるように、パスはインポートする前にソートされます。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.5 で変更: </span>パッケージ名がデフォルトのパターンに適合するのは不可能なので、パスが <em>pattern</em> に適合するかどうかに関係無く、見付けたパッケージに <code class="docutils literal"><span class="pre">load_tests</span></code> があるかをチェックするようになりました。</p>
</div>
</dd></dl>

<p>以下の属性は、サブクラス化またはインスタンスの属性値を変更して <a class="reference internal" href="#unittest.TestLoader" title="unittest.TestLoader"><code class="xref py py-class docutils literal"><span class="pre">TestLoader</span></code></a> をカスタマイズする場合に使用します:</p>
<dl class="attribute">
<dt id="unittest.TestLoader.testMethodPrefix">
<code class="descname">testMethodPrefix</code><a class="headerlink" href="#unittest.TestLoader.testMethodPrefix" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストメソッドの名前と判断されるメソッド名の接頭語を示す文字列。デフォルト値は <code class="docutils literal"><span class="pre">'test'</span></code> です。</p>
<p>この値は <a class="reference internal" href="#unittest.TestLoader.getTestCaseNames" title="unittest.TestLoader.getTestCaseNames"><code class="xref py py-meth docutils literal"><span class="pre">getTestCaseNames()</span></code></a> と全ての <code class="xref py py-meth docutils literal"><span class="pre">loadTestsFrom*()</span></code> メソッドに影響を与えます。</p>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestLoader.sortTestMethodsUsing">
<code class="descname">sortTestMethodsUsing</code><a class="headerlink" href="#unittest.TestLoader.sortTestMethodsUsing" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestLoader.getTestCaseNames" title="unittest.TestLoader.getTestCaseNames"><code class="xref py py-meth docutils literal"><span class="pre">getTestCaseNames()</span></code></a> および全ての <code class="xref py py-meth docutils literal"><span class="pre">loadTestsFrom*()</span></code> メソッドでメソッド名をソートする際に使用する比較関数。</p>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestLoader.suiteClass">
<code class="descname">suiteClass</code><a class="headerlink" href="#unittest.TestLoader.suiteClass" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストのリストからテストスイートを構築する呼び出し可能オブジェクト。メソッドを持つ必要はありません。デフォルト値は <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> です。</p>
<p>この値は全ての <code class="xref py py-meth docutils literal"><span class="pre">loadTestsFrom*()</span></code> メソッドに影響を与えます。</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="unittest.TestResult">
<em class="property">class </em><code class="descclassname">unittest.</code><code class="descname">TestResult</code><a class="headerlink" href="#unittest.TestResult" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このクラスはどのテストが成功しどのテストが失敗したかという情報を収集するのに使います。</p>
<p><a class="reference internal" href="#unittest.TestResult" title="unittest.TestResult"><code class="xref py py-class docutils literal"><span class="pre">TestResult</span></code></a> は、複数のテスト結果を記録します。 <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> クラスと <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> クラスのテスト結果を正しく記録しますので、テスト開発者が独自にテスト結果を管理する処理を開発する必要はありません。</p>
<p><a class="reference internal" href="#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> を利用したテストフレームワークでは、 <code class="xref py py-meth docutils literal"><span class="pre">TestRunner.run()</span></code> が返す <a class="reference internal" href="#unittest.TestResult" title="unittest.TestResult"><code class="xref py py-class docutils literal"><span class="pre">TestResult</span></code></a> インスタンスを参照し、テスト結果をレポートします。</p>
<p><a class="reference internal" href="#unittest.TestResult" title="unittest.TestResult"><code class="xref py py-class docutils literal"><span class="pre">TestResult</span></code></a> インスタンスの以下の属性は、テストの実行結果を検査する際に使用することができます:</p>
<dl class="attribute">
<dt id="unittest.TestResult.errors">
<code class="descname">errors</code><a class="headerlink" href="#unittest.TestResult.errors" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> と例外のトレースバック情報をフォーマットした文字列の 2 要素タプルからなるリスト。それぞれのタプルは予想外の例外を送出したテストに対応します。</p>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestResult.failures">
<code class="descname">failures</code><a class="headerlink" href="#unittest.TestResult.failures" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> と例外のトレースバック情報をフォーマットした文字列の 2 要素タプルからなるリスト。それぞれのタプルは <code class="xref py py-meth docutils literal"><span class="pre">TestCase.assert*()</span></code> メソッドを使って見つけ出した失敗に対応します。</p>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestResult.skipped">
<code class="descname">skipped</code><a class="headerlink" href="#unittest.TestResult.skipped" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> インスタンスとテストをスキップした理由を保持する文字列の2要素タプルからなるリストです。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestResult.expectedFailures">
<code class="descname">expectedFailures</code><a class="headerlink" href="#unittest.TestResult.expectedFailures" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> と例外のトレースバック情報をフォーマット済の文字列の 2 要素タプルからなるリストです。それぞれのタプルは予期された失敗に対応します。</p>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestResult.unexpectedSuccesses">
<code class="descname">unexpectedSuccesses</code><a class="headerlink" href="#unittest.TestResult.unexpectedSuccesses" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>予期された失敗とされていながら成功してしまった <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> のインスタンスのリスト。</p>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestResult.shouldStop">
<code class="descname">shouldStop</code><a class="headerlink" href="#unittest.TestResult.shouldStop" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">True</span></code> が設定されると <a class="reference internal" href="#unittest.TestResult.stop" title="unittest.TestResult.stop"><code class="xref py py-meth docutils literal"><span class="pre">stop()</span></code></a> によりテストの実行が停止します。</p>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestResult.testsRun">
<code class="descname">testsRun</code><a class="headerlink" href="#unittest.TestResult.testsRun" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>これまでに実行したテストの総数です。</p>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestResult.buffer">
<code class="descname">buffer</code><a class="headerlink" href="#unittest.TestResult.buffer" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">True</span></code> が設定されると、 <code class="docutils literal"><span class="pre">sys.stdout</span></code> と <code class="docutils literal"><span class="pre">sys.stderr</span></code> は、 <a class="reference internal" href="#unittest.TestResult.startTest" title="unittest.TestResult.startTest"><code class="xref py py-meth docutils literal"><span class="pre">startTest()</span></code></a> から <a class="reference internal" href="#unittest.TestResult.stopTest" title="unittest.TestResult.stopTest"><code class="xref py py-meth docutils literal"><span class="pre">stopTest()</span></code></a> が呼ばれるまでの間バッファリングされます。実際に、結果が <code class="docutils literal"><span class="pre">sys.stdout</span></code> と <code class="docutils literal"><span class="pre">sys.stderr</span></code> に出力されるのは、テストが失敗するかエラーが発生した時になります。表示の際には、全ての失敗 / エラーメッセージが表示されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestResult.failfast">
<code class="descname">failfast</code><a class="headerlink" href="#unittest.TestResult.failfast" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>真の場合 <a class="reference internal" href="#unittest.TestResult.stop" title="unittest.TestResult.stop"><code class="xref py py-meth docutils literal"><span class="pre">stop()</span></code></a> が始めの失敗もしくはエラーの時に呼び出され、テストの実行が終了します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="unittest.TestResult.tb_locals">
<code class="descname">tb_locals</code><a class="headerlink" href="#unittest.TestResult.tb_locals" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>真の場合、局所変数がトレースバックに表示されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.5 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestResult.wasSuccessful">
<code class="descname">wasSuccessful</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestResult.wasSuccessful" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>これまでに実行したテストが全て成功していれば <code class="docutils literal"><span class="pre">True</span></code> を、それ以外なら <code class="docutils literal"><span class="pre">False</span></code> を返します。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.4 で変更: </span><a class="reference internal" href="#unittest.expectedFailure" title="unittest.expectedFailure"><code class="xref py py-func docutils literal"><span class="pre">expectedFailure()</span></code></a> デコレ－タでマークされたテストに <a class="reference internal" href="#unittest.TestResult.unexpectedSuccesses" title="unittest.TestResult.unexpectedSuccesses"><code class="xref py py-attr docutils literal"><span class="pre">unexpectedSuccesses</span></code></a> があった場合 <code class="docutils literal"><span class="pre">False</span></code> を返します。</p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestResult.stop">
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestResult.stop" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このメソッドを呼び出して <a class="reference internal" href="#unittest.TestResult" title="unittest.TestResult"><code class="xref py py-class docutils literal"><span class="pre">TestResult</span></code></a> の <a class="reference internal" href="#unittest.TestResult.shouldStop" title="unittest.TestResult.shouldStop"><code class="xref py py-attr docutils literal"><span class="pre">shouldStop</span></code></a> 属性に <code class="docutils literal"><span class="pre">True</span></code> をセットすることで、実行中のテストは中断しなければならないというシグナルを送ることができます。 <code class="xref py py-class docutils literal"><span class="pre">TestRunner</span></code> オブジェクトはこのフラグを順守してそれ以上のテストを実行することなく復帰しなければなりません。</p>
<p>たとえばこの機能は、ユーザのキーボード割り込みを受け取って <a class="reference internal" href="#unittest.TextTestRunner" title="unittest.TextTestRunner"><code class="xref py py-class docutils literal"><span class="pre">TextTestRunner</span></code></a> クラスがテストフレームワークを停止させるのに使えます。 <code class="xref py py-class docutils literal"><span class="pre">TestRunner</span></code> の実装を提供する対話的なツールでも同じように使用することができます。</p>
</dd></dl>

<p><a class="reference internal" href="#unittest.TestResult" title="unittest.TestResult"><code class="xref py py-class docutils literal"><span class="pre">TestResult</span></code></a> クラスの以下のメソッドは内部データ管理用のメソッドですが、対話的にテスト結果をレポートするテストツールを開発する場合などにはサブクラスで拡張することができます。</p>
<dl class="method">
<dt id="unittest.TestResult.startTest">
<code class="descname">startTest</code><span class="sig-paren">(</span><em>test</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestResult.startTest" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>test</em> を実行する直前に呼び出されます。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestResult.stopTest">
<code class="descname">stopTest</code><span class="sig-paren">(</span><em>test</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestResult.stopTest" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>test</em> の実行直後に、テスト結果に関わらず呼び出されます。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestResult.startTestRun">
<code class="descname">startTestRun</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestResult.startTestRun" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>全てのテストが実行される前に一度だけ実行されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestResult.stopTestRun">
<code class="descname">stopTestRun</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestResult.stopTestRun" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>全てのテストが実行された後に一度だけ実行されます。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.1 で追加.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TestResult.addError">
<code class="descname">addError</code><span class="sig-paren">(</span><em>test</em>, <em>err</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestResult.addError" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テスト <em>test</em> 実行中に、想定外の例外が発生した場合に呼び出されます。 <em>err</em> は <a class="reference internal" href="sys.html#sys.exc_info" title="sys.exc_info"><code class="xref py py-func docutils literal"><span class="pre">sys.exc_info()</span></code></a> が返すタプル <code class="docutils literal"><span class="pre">(type,</span> <span class="pre">value,</span> <span class="pre">traceback)</span></code> です。</p>
<p>デフォルトの実装では、タプル、 <code class="docutils literal"><span class="pre">(test,</span> <span class="pre">formatted_err)</span></code> をインスタンスの <a class="reference internal" href="#unittest.TestResult.errors" title="unittest.TestResult.errors"><code class="xref py py-attr docutils literal"><span class="pre">errors</span></code></a> 属性に追加します。ここで、 <em>formatted_err</em> は、 <em>err</em> から導出される、整形されたトレースバックです。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestResult.addFailure">
<code class="descname">addFailure</code><span class="sig-paren">(</span><em>test</em>, <em>err</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestResult.addFailure" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストケース <em>test</em> が失敗した場合に呼び出されます。 <em>err</em> は <a class="reference internal" href="sys.html#sys.exc_info" title="sys.exc_info"><code class="xref py py-func docutils literal"><span class="pre">sys.exc_info()</span></code></a> が返すタプル <code class="docutils literal"><span class="pre">(type,</span> <span class="pre">value,</span> <span class="pre">traceback)</span></code> です。</p>
<p>デフォルトの実装では、タプル、 <code class="docutils literal"><span class="pre">(test,</span> <span class="pre">formatted_err)</span></code> をインスタンスの <a class="reference internal" href="#unittest.TestResult.failures" title="unittest.TestResult.failures"><code class="xref py py-attr docutils literal"><span class="pre">failures</span></code></a> 属性に追加します。ここで、 <em>formatted_err</em> は、 <em>err</em> から導出される、整形されたトレースバックです。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestResult.addSuccess">
<code class="descname">addSuccess</code><span class="sig-paren">(</span><em>test</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestResult.addSuccess" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テストケース <em>test</em> が成功した場合に呼び出されます。</p>
<p>デフォルトの実装では何もしません。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestResult.addSkip">
<code class="descname">addSkip</code><span class="sig-paren">(</span><em>test</em>, <em>reason</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestResult.addSkip" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>test</em> がスキップされた時に呼び出されます。<em>reason</em> はスキップの際に渡された理由の文字列です。</p>
<p>デフォルトの実装では、 <code class="docutils literal"><span class="pre">(test,</span> <span class="pre">reason)</span></code> のタプルをインスタンスの <a class="reference internal" href="#unittest.TestResult.skipped" title="unittest.TestResult.skipped"><code class="xref py py-attr docutils literal"><span class="pre">skipped</span></code></a> 属性に追加します。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestResult.addExpectedFailure">
<code class="descname">addExpectedFailure</code><span class="sig-paren">(</span><em>test</em>, <em>err</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestResult.addExpectedFailure" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.expectedFailure" title="unittest.expectedFailure"><code class="xref py py-func docutils literal"><span class="pre">expectedFailure()</span></code></a> のデコレータでマークされた <em>test</em> が失敗した時に呼び出されます。</p>
<p>デフォルトの実装では <code class="docutils literal"><span class="pre">(test,</span> <span class="pre">formatted_err)</span></code> のタプルをインスタンスの <a class="reference internal" href="#unittest.TestResult.expectedFailures" title="unittest.TestResult.expectedFailures"><code class="xref py py-attr docutils literal"><span class="pre">expectedFailures</span></code></a> に追加します。ここで <em>formatted_err</em> は <em>err</em> から派生した整形されたトレースバックです。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestResult.addUnexpectedSuccess">
<code class="descname">addUnexpectedSuccess</code><span class="sig-paren">(</span><em>test</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestResult.addUnexpectedSuccess" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.expectedFailure" title="unittest.expectedFailure"><code class="xref py py-func docutils literal"><span class="pre">expectedFailure()</span></code></a> のデコレータでマークされた <em>test</em> が成功した時に呼び出されます。</p>
<p>デフォルトの実装ではテストをインスタンスの <a class="reference internal" href="#unittest.TestResult.unexpectedSuccesses" title="unittest.TestResult.unexpectedSuccesses"><code class="xref py py-attr docutils literal"><span class="pre">unexpectedSuccesses</span></code></a> 属性に追加します。</p>
</dd></dl>

<dl class="method">
<dt id="unittest.TestResult.addSubTest">
<code class="descname">addSubTest</code><span class="sig-paren">(</span><em>test</em>, <em>subtest</em>, <em>outcome</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TestResult.addSubTest" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>サブテストが終了すると呼ばれます。
<em>test</em> はテストメソッドに対応するテストケースです。
<em>subtest</em> はサブテストを記述するカスタムの <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> インスタンスです。</p>
<p><em>outcome</em> が <a class="reference internal" href="constants.html#None" title="None"><code class="xref py py-const docutils literal"><span class="pre">None</span></code></a> の場合サブテストは成功です。
それ以外の場合は失敗で、<a class="reference internal" href="sys.html#sys.exc_info" title="sys.exc_info"><code class="xref py py-func docutils literal"><span class="pre">sys.exc_info()</span></code></a> が返す形式 <code class="docutils literal"><span class="pre">(type,</span> <span class="pre">value,</span> <span class="pre">traceback)</span></code> の <em>outcome</em> を持つ例外を伴います。</p>
<p>結果が成功の場合デフォルトの実装では何もせず、サブテストの失敗を通常の失敗として報告します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.4 で追加.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="unittest.TextTestResult">
<em class="property">class </em><code class="descclassname">unittest.</code><code class="descname">TextTestResult</code><span class="sig-paren">(</span><em>stream</em>, <em>descriptions</em>, <em>verbosity</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TextTestResult" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TextTestRunner" title="unittest.TextTestRunner"><code class="xref py py-class docutils literal"><span class="pre">TextTestRunner</span></code></a> に使用される <a class="reference internal" href="#unittest.TestResult" title="unittest.TestResult"><code class="xref py py-class docutils literal"><span class="pre">TestResult</span></code></a> の具象実装です。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加: </span>このクラスは以前 <code class="docutils literal"><span class="pre">_TextTestResult</span></code> という名前でした。以前の名前はエイリアスとして残っていますが非推奨です。</p>
</div>
</dd></dl>

<dl class="data">
<dt id="unittest.defaultTestLoader">
<code class="descclassname">unittest.</code><code class="descname">defaultTestLoader</code><a class="headerlink" href="#unittest.defaultTestLoader" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#unittest.TestLoader" title="unittest.TestLoader"><code class="xref py py-class docutils literal"><span class="pre">TestLoader</span></code></a> のインスタンスで、共用することが目的です。 <a class="reference internal" href="#unittest.TestLoader" title="unittest.TestLoader"><code class="xref py py-class docutils literal"><span class="pre">TestLoader</span></code></a> をカスタマイズする必要がなければ、新しい <a class="reference internal" href="#unittest.TestLoader" title="unittest.TestLoader"><code class="xref py py-class docutils literal"><span class="pre">TestLoader</span></code></a> オブジェクトを作らずにこのインスタンスを使用します。</p>
</dd></dl>

<dl class="class">
<dt id="unittest.TextTestRunner">
<em class="property">class </em><code class="descclassname">unittest.</code><code class="descname">TextTestRunner</code><span class="sig-paren">(</span><em>stream=None</em>, <em>descriptions=True</em>, <em>verbosity=1</em>, <em>failfast=False</em>, <em>buffer=False</em>, <em>resultclass=None</em>, <em>warnings=None</em>, <em>*</em>, <em>tb_locals=False</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TextTestRunner" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>結果をストリームに出力する、基本的なテストランナーの実装です。
<em>stream</em> が <code class="docutils literal"><span class="pre">None</span></code> の場合、デフォルトで <a class="reference internal" href="sys.html#sys.stderr" title="sys.stderr"><code class="xref py py-data docutils literal"><span class="pre">sys.stderr</span></code></a> が出力ストリームとして使われます。
このクラスはいくつかの設定項目があるだけで、基本的に非常に単純です。
グラフィカルなテスト実行アプリケーションでは、独自のテストランナーを実装してください。
テストランナーの実装は、 unittest に新しい機能が追加されランナーを構築するインターフェースが変更されたときに備えて <code class="docutils literal"><span class="pre">**kwargs</span></code> を受け取れるようにするべきです。</p>
<p><a class="reference internal" href="warnings.html#warning-ignored"><span class="std std-ref">デフォルトで無視</span></a> に設定されているとしても、このランナーのデフォルトでは <a class="reference internal" href="exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal"><span class="pre">DeprecationWarning</span></code></a>, <a class="reference internal" href="exceptions.html#PendingDeprecationWarning" title="PendingDeprecationWarning"><code class="xref py py-exc docutils literal"><span class="pre">PendingDeprecationWarning</span></code></a>, <a class="reference internal" href="exceptions.html#ResourceWarning" title="ResourceWarning"><code class="xref py py-exc docutils literal"><span class="pre">ResourceWarning</span></code></a>, <a class="reference internal" href="exceptions.html#ImportWarning" title="ImportWarning"><code class="xref py py-exc docutils literal"><span class="pre">ImportWarning</span></code></a> を表示します。
<a class="reference internal" href="#deprecated-aliases"><span class="std std-ref">unittest の非推奨メソッド</span></a> で起きた非推奨警告も特別な場合として扱われ、警告フィルタが <code class="docutils literal"><span class="pre">'default'</span></code> もしくは <code class="docutils literal"><span class="pre">'always'</span></code> だったとき、対象の警告メッセージが出ないようにモジュールごとに1回だけ表示されます。
Python の <code class="xref std std-option docutils literal"><span class="pre">-Wd</span></code> オプションや <code class="xref std std-option docutils literal"><span class="pre">-Wa</span></code> オプション (<a class="reference internal" href="../using/cmdline.html#using-on-warnings"><span class="std std-ref">警告の制御</span></a> を参照してください) を使ったり、 <em>warnings</em> を <code class="docutils literal"><span class="pre">None</span></code> にしたりしておくと、この動作を上書きできます。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.2 で変更: </span><code class="docutils literal"><span class="pre">warnings</span></code> 引数が追加されました。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.2 で変更: </span>インポート時でなくインスタンス化時にデフォルトのストリームが <a class="reference internal" href="sys.html#sys.stderr" title="sys.stderr"><code class="xref py py-data docutils literal"><span class="pre">sys.stderr</span></code></a> に設定されます。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.5 で変更: </span>tb_locals 引数が追加されました。</p>
</div>
<dl class="method">
<dt id="unittest.TextTestRunner._makeResult">
<code class="descname">_makeResult</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TextTestRunner._makeResult" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このメソッドは <a class="reference internal" href="#unittest.TextTestRunner.run" title="unittest.TextTestRunner.run"><code class="xref py py-meth docutils literal"><span class="pre">run()</span></code></a> で使われる <code class="docutils literal"><span class="pre">TestResult</span></code> のインスタンスを返します。このメソッドは明示的に呼び出す必要はありませんが、サブクラスで <code class="docutils literal"><span class="pre">TestResult</span></code> をカスタマイズすることができます。</p>
<p><code class="docutils literal"><span class="pre">_makeResult()</span></code> は、 <code class="docutils literal"><span class="pre">TextTestRunner</span></code> のコンストラクタで <code class="docutils literal"><span class="pre">resultclass</span></code> 引数として渡されたクラスもしくはコーラブルオブジェクトをインスタンス化します。 <code class="docutils literal"><span class="pre">resultclass</span></code> が指定されていない場合には、デフォルトで <a class="reference internal" href="#unittest.TextTestResult" title="unittest.TextTestResult"><code class="xref py py-class docutils literal"><span class="pre">TextTestResult</span></code></a> が使用されます。結果のクラスは以下の引数が渡されインスタンス化されます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">stream</span><span class="p">,</span> <span class="n">descriptions</span><span class="p">,</span> <span class="n">verbosity</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="unittest.TextTestRunner.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>test</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.TextTestRunner.run" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このメソッドは <cite>TextTestRunner</cite> へのメインの公開インターフェースです。
このメソッドは <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> インスタンスあるいは <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> インスタンスを受け取ります。
<a class="reference internal" href="#unittest.TextTestRunner._makeResult" title="unittest.TextTestRunner._makeResult"><code class="xref py py-func docutils literal"><span class="pre">_makeResult()</span></code></a> が呼ばれて <a class="reference internal" href="#unittest.TestResult" title="unittest.TestResult"><code class="xref py py-class docutils literal"><span class="pre">TestResult</span></code></a> が作成され、テストが実行され、結果が標準出力に表示されます。</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="unittest.main">
<code class="descclassname">unittest.</code><code class="descname">main</code><span class="sig-paren">(</span><em>module='__main__'</em>, <em>defaultTest=None</em>, <em>argv=None</em>, <em>testRunner=None</em>, <em>testLoader=unittest.defaultTestLoader</em>, <em>exit=True</em>, <em>verbosity=1</em>, <em>failfast=None</em>, <em>catchbreak=None</em>, <em>buffer=None</em>, <em>warnings=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.main" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>module</em> から複数のテストを読み込んで実行するためのコマンドラインプログラム。この関数を使えば、簡単に実行可能なテストモジュールを作成する事ができます。一番簡単なこの関数の使い方は、以下の行をテストスクリプトの最後に置くことです:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>より詳細な情報は verbosity 引数を指定して実行すると得られます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">verbosity</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p><em>defaultTest</em> 引数は、 <em>argv</em> にテスト名が指定されていない場合に実行する、ある1つのテストの名前もしくはテスト名のイテラブルです。
この引数を指定しないか <code class="docutils literal"><span class="pre">None</span></code> を指定し、かつ <em>argv</em> にテスト名が与えられない場合は、 <em>module</em> にある全てのテストを実行します。</p>
<p><em>argv</em> 引数には、プログラムに渡されたオプションのリストを、最初の要素がプログラム名のままで渡せます。指定しないか <code class="docutils literal"><span class="pre">None</span></code> の場合は <a class="reference internal" href="sys.html#sys.argv" title="sys.argv"><code class="xref py py-data docutils literal"><span class="pre">sys.argv</span></code></a> が使われます。</p>
<p>引数、 <em>testRunner</em> は、test runner class、あるいは、そのインスタンスのどちらでも構いません。でフォルトでは <code class="docutils literal"><span class="pre">main</span></code> はテストが成功したか失敗したかに対応した終了コードと共に <a class="reference internal" href="sys.html#sys.exit" title="sys.exit"><code class="xref py py-func docutils literal"><span class="pre">sys.exit()</span></code></a> を呼び出します。</p>
<p><em>testLoader</em> 引数は <a class="reference internal" href="#unittest.TestLoader" title="unittest.TestLoader"><code class="xref py py-class docutils literal"><span class="pre">TestLoader</span></code></a> インスタンスでなければなりません。デフォルトは <a class="reference internal" href="#unittest.defaultTestLoader" title="unittest.defaultTestLoader"><code class="xref py py-data docutils literal"><span class="pre">defaultTestLoader</span></code></a> です。</p>
<p><code class="docutils literal"><span class="pre">main</span></code> は、 <code class="docutils literal"><span class="pre">exit=False</span></code> を指定する事で対話的なインタプリタから使用することもできます。この引数を指定すると、 <a class="reference internal" href="sys.html#sys.exit" title="sys.exit"><code class="xref py py-func docutils literal"><span class="pre">sys.exit()</span></code></a> を呼ばずに、結果のみを出力します:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">unittest</span> <span class="k">import</span> <span class="n">main</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">main</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="s1">&#39;test_module&#39;</span><span class="p">,</span> <span class="n">exit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p><em>failfast</em>, <em>catchbreak</em>, <em>buffer</em> は、<a class="reference internal" href="#command-line-options">コマンドラインオプション</a> にある同名のオプションと同じ効果のあるパラメータです。</p>
<p><em>warnings</em> 引数では、テストの実行中に使うべき <a class="reference internal" href="warnings.html#warning-filter"><span class="std std-ref">警告フィルタ</span></a> を指定します。
この引数が指定されない場合には、 <code class="xref std std-option docutils literal"><span class="pre">-W</span></code> オプションが <strong class="program">python</strong> に渡されていなければ <code class="docutils literal"><span class="pre">None</span></code> のまま (<a class="reference internal" href="../using/cmdline.html#using-on-warnings"><span class="std std-ref">警告の制御</span></a> を参照してください) で、そうでなければ <code class="docutils literal"><span class="pre">'default'</span></code> が設定されます。</p>
<p><code class="docutils literal"><span class="pre">main</span></code> を呼び出すと、<code class="docutils literal"><span class="pre">TestProgram</span></code> のインスタンスが返されます。このインスタンスは、<code class="docutils literal"><span class="pre">result</span></code> 属性にテスト結果を保持します。</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.1 で変更: </span><em>exit</em> パラメータが追加されました。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.2 で変更: </span><em>verbosity</em>、<em>failfast</em>、<em>catchbreak</em>、<em>buffer</em>、<em>warnings</em> 引数が追加されました。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.4 で変更: </span><em>defaultTest</em> 引数がテスト名のイテラブルも受け取るようになりました。</p>
</div>
</dd></dl>

<div class="section" id="load-tests-protocol">
<h4>26.4.8.3.1. load_tests プロトコル<a class="headerlink" href="#load-tests-protocol" title="このヘッドラインへのパーマリンク">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加.</span></p>
</div>
<p>モジュールやパッケージには、<code class="docutils literal"><span class="pre">load_tests</span></code> と呼ばれる関数を実装できます。これにより、通常のテスト実行時やテストディスカバリ時のテストのロードされ方をカスタマイズできます。</p>
<p>テストモジュールが <code class="docutils literal"><span class="pre">load_tests</span></code> を定義していると、それが <a class="reference internal" href="#unittest.TestLoader.loadTestsFromModule" title="unittest.TestLoader.loadTestsFromModule"><code class="xref py py-meth docutils literal"><span class="pre">TestLoader.loadTestsFromModule()</span></code></a> から呼ばれます。引数は以下です:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">load_tests</span><span class="p">(</span><span class="n">loader</span><span class="p">,</span> <span class="n">standard_tests</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</pre></div>
</div>
<p><em>pattern</em> は <code class="docutils literal"><span class="pre">loadTestsFromModule</span></code> からそのまま渡されます。デフォルトは <code class="docutils literal"><span class="pre">None</span></code> です。</p>
<p>これは <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> を返すべきです。</p>
<p><em>loader</em> はローディングを行う <a class="reference internal" href="#unittest.TestLoader" title="unittest.TestLoader"><code class="xref py py-class docutils literal"><span class="pre">TestLoader</span></code></a> のインスタンスです。 <em>standard_tests</em> は、そのモジュールからデフォルトでロードされるテストです。これは、テストの標準セットのテストの追加や削除のみを行いたいテストモジュールに一般に使われます。第三引数は、パッケージをテストディスカバリの一部としてロードするときに使われます。</p>
<p>特定の <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> クラスのセットからテストをロードする典型的な <code class="docutils literal"><span class="pre">load_tests</span></code> 関数は、このようになります:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">test_cases</span> <span class="o">=</span> <span class="p">(</span><span class="n">TestCase1</span><span class="p">,</span> <span class="n">TestCase2</span><span class="p">,</span> <span class="n">TestCase3</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">load_tests</span><span class="p">(</span><span class="n">loader</span><span class="p">,</span> <span class="n">tests</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
    <span class="n">suite</span> <span class="o">=</span> <span class="n">TestSuite</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">test_class</span> <span class="ow">in</span> <span class="n">test_cases</span><span class="p">:</span>
        <span class="n">tests</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">loadTestsFromTestCase</span><span class="p">(</span><span class="n">test_class</span><span class="p">)</span>
        <span class="n">suite</span><span class="o">.</span><span class="n">addTests</span><span class="p">(</span><span class="n">tests</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">suite</span>
</pre></div>
</div>
<p>コマンドラインからでも <a class="reference internal" href="#unittest.TestLoader.discover" title="unittest.TestLoader.discover"><code class="xref py py-meth docutils literal"><span class="pre">TestLoader.discover()</span></code></a> の呼び出しでも、パッケージを含むディレクトリで検索を始めた場合、そのパッケージの <code class="file docutils literal"><span class="pre">__init__.py</span></code> をチェックして <code class="docutils literal"><span class="pre">load_tests</span></code> を探します。
その関数が存在しない場合、他のディレクトリであるかのようにパッケージの中を再帰的に検索します。
その関数が存在した場合、パッケージのテストの検索をそちらに任せ、 <code class="docutils literal"><span class="pre">load_tests</span></code> が次の引数で呼び出されます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">load_tests</span><span class="p">(</span><span class="n">loader</span><span class="p">,</span> <span class="n">standard_tests</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</pre></div>
</div>
<p>これはパッケージ内のすべてのテストを表す <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> を返すべきです。 (<code class="docutils literal"><span class="pre">standard_tests</span></code> には、 <code class="file docutils literal"><span class="pre">__init__.py</span></code> から収集されたテストのみが含まれます。)</p>
<p>パターンは <code class="docutils literal"><span class="pre">load_tests</span></code> に渡されるので、パッケージは自由にテストディスカバリを継続 (必要なら変更) できます。テストパッケージに &#8216;何もしない&#8217; <code class="docutils literal"><span class="pre">load_tests</span></code> 関数は次のようになります:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">load_tests</span><span class="p">(</span><span class="n">loader</span><span class="p">,</span> <span class="n">standard_tests</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
    <span class="c1"># top level directory cached on loader instance</span>
    <span class="n">this_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
    <span class="n">package_tests</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">discover</span><span class="p">(</span><span class="n">start_dir</span><span class="o">=</span><span class="n">this_dir</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="n">pattern</span><span class="p">)</span>
    <span class="n">standard_tests</span><span class="o">.</span><span class="n">addTests</span><span class="p">(</span><span class="n">package_tests</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">standard_tests</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.5 で変更: </span>パッケージ名がデフォルトのパターンに適合するのが不可能なため、検索ではパッケージ名が <em>pattern</em> に適合するかのチェックは行われなくなりました。</p>
</div>
</div>
</div>
</div>
<div class="section" id="class-and-module-fixtures">
<h2>26.4.9. クラスとモジュールのフィクスチャ<a class="headerlink" href="#class-and-module-fixtures" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>クラスレベルとモジュールレベルのフィクスチャが <a class="reference internal" href="#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal"><span class="pre">TestSuite</span></code></a> に実装されました。
テストスイートが新しいクラスのテストを始める時、以前のクラス (あれば)の <code class="xref py py-meth docutils literal"><span class="pre">tearDownClass()</span></code> を呼び出し、その後に新しいクラスの <code class="xref py py-meth docutils literal"><span class="pre">setUpClass()</span></code> を呼び出します。</p>
<p>同様に、今回のテストのモジュールが前回のテストとは異なる場合、以前のモジュールの <code class="docutils literal"><span class="pre">tearDownModule</span></code> を実行し、次に新しいモジュールの <code class="docutils literal"><span class="pre">setUpModule</span></code> を実行します。</p>
<p>すべてのテストが実行された後、最後の <code class="docutils literal"><span class="pre">tearDownClass</span></code> と <code class="docutils literal"><span class="pre">tearDownModule</span></code> が実行されます。</p>
<p>なお、共有フィクスチャは、テストの並列化などの [潜在的な] 機能と同時にはうまくいかず、テストの分離を壊すので、気をつけて使うべきです。</p>
<p>unittest テストローダによるテスト作成のデフォルトの順序では、同じモジュールやクラスからのテストはすべて同じグループにまとめられます。これにより、<code class="docutils literal"><span class="pre">setUpClass</span></code> / <code class="docutils literal"><span class="pre">setUpModule</span></code> (など) は、一つのクラスやモジュールにつき一度だけ呼ばれます。この順序をバラバラにし、異なるモジュールやクラスのテストが並ぶようにすると、共有フィクスチャ関数は、一度のテストで複数回呼ばれるようにもなります。</p>
<p>共有フィクスチャは標準でない順序で実行されることを意図していません。
共有フィクスチャをサポートしたくないフレームワークのために、<code class="docutils literal"><span class="pre">BaseTestSuite</span></code> がまだ存在しています。</p>
<p>共有フィクスチャ関数のいずれかで例外が発生した場合、そのテストはエラーとして報告されます。
そのとき、対応するテストインスタンスが無いので(<a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> と同じインタフェースの) <code class="docutils literal"><span class="pre">_ErrorHolder</span></code> オブジェクトが生成され、エラーを表します。
標準 unittest テストランナーを使っている場合はこの詳細は問題になりませんが、あなたがフレームワークの作者である場合は注意してください。</p>
<div class="section" id="setupclass-and-teardownclass">
<h3>26.4.9.1. setUpClass と tearDownClass<a class="headerlink" href="#setupclass-and-teardownclass" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>これらはクラスメソッドとして実装されなければなりません:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unittest</span>

<span class="k">class</span> <span class="nc">Test</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">setUpClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_connection</span> <span class="o">=</span> <span class="n">createExpensiveConnectionObject</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">tearDownClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_connection</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
</pre></div>
</div>
<p>基底クラスの <code class="docutils literal"><span class="pre">setUpClass</span></code> および <code class="docutils literal"><span class="pre">tearDownClass</span></code> を使いたいなら、それらを自分で呼び出さなければなりません。 <a class="reference internal" href="#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal"><span class="pre">TestCase</span></code></a> の実装は空です。</p>
<p><code class="docutils literal"><span class="pre">setUpClass</span></code> の中で例外が送出されたら、クラス内のテストは実行されず、 <code class="docutils literal"><span class="pre">tearDownClass</span></code> も実行されません。スキップされたクラスは <code class="docutils literal"><span class="pre">setUpClass</span></code> も <code class="docutils literal"><span class="pre">tearDownClass</span></code> も実行されません。例外が <a class="reference internal" href="#unittest.SkipTest" title="unittest.SkipTest"><code class="xref py py-exc docutils literal"><span class="pre">SkipTest</span></code></a> 例外であれば、そのクラスはエラーではなくスキップされたものとして報告されます。</p>
</div>
<div class="section" id="setupmodule-and-teardownmodule">
<h3>26.4.9.2. setUpModule と tearDownModule<a class="headerlink" href="#setupmodule-and-teardownmodule" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>これらは関数として実装されなければなりません:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">setUpModule</span><span class="p">():</span>
    <span class="n">createConnection</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">tearDownModule</span><span class="p">():</span>
    <span class="n">closeConnection</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">setUpModule</span></code> の中で例外が送出されたら、モジュール内のテストは実行されず、 <code class="docutils literal"><span class="pre">tearDownModule</span></code> も実行されません。例外が <a class="reference internal" href="#unittest.SkipTest" title="unittest.SkipTest"><code class="xref py py-exc docutils literal"><span class="pre">SkipTest</span></code></a> 例外であれば、そのモジュールはエラーではなくスキップされたものとして報告されます。</p>
</div>
</div>
<div class="section" id="signal-handling">
<h2>26.4.10. シグナルハンドリング<a class="headerlink" href="#signal-handling" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.2 で追加.</span></p>
</div>
<p>unittest の <a class="reference internal" href="#cmdoption-unittest-c"><code class="xref std std-option docutils literal"><span class="pre">-c/--catch</span></code></a> コマンドラインオプションや、 <a class="reference internal" href="#unittest.main" title="unittest.main"><code class="xref py py-func docutils literal"><span class="pre">unittest.main()</span></code></a> の <code class="docutils literal"><span class="pre">catchbreak</span></code> パラメタは、テスト実行中の control-C の処理をよりフレンドリーにします。中断捕捉動作を有効である場合、 control-C が押されると、現在実行されているテストまで完了され、そのテストランが終わると今までの結果が報告されます。control-C がもう一度押されると、通常通り <a class="reference internal" href="exceptions.html#KeyboardInterrupt" title="KeyboardInterrupt"><code class="xref py py-exc docutils literal"><span class="pre">KeyboardInterrupt</span></code></a> が送出されます。</p>
<p>シグナルハンドラを処理する control-c は、独自の <code class="xref py py-const docutils literal"><span class="pre">signal.SIGINT</span></code> ハンドラをインストールするコードやテストの互換性を保とうとします。 <code class="docutils literal"><span class="pre">unittest</span></code> ハンドラが呼ばれ、それがインストールされた <code class="xref py py-const docutils literal"><span class="pre">signal.SIGINT</span></code> ハンドラで <em>なければ</em> 、すなわちテスト中のシステムに置き換えられて移譲されたなら、それはデフォルトのハンドラを呼び出します。インストールされたハンドラを置き換えて委譲するようなコードは、通常その動作を期待するからです。 <code class="docutils literal"><span class="pre">unittest</span></code> の control-c 処理を無効にしたいような個別のテストには、 <a class="reference internal" href="#unittest.removeHandler" title="unittest.removeHandler"><code class="xref py py-func docutils literal"><span class="pre">removeHandler()</span></code></a> デコレータが使えます。</p>
<p>フレームワークの作者がテストフレームワーク内で control-c 処理を有効にするための、いくつかのユーティリティ関数があります。</p>
<dl class="function">
<dt id="unittest.installHandler">
<code class="descclassname">unittest.</code><code class="descname">installHandler</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unittest.installHandler" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>control-c ハンドラをインストールします。(主にユーザが control-c を押したことにより) <code class="xref py py-const docutils literal"><span class="pre">signal.SIGINT</span></code> が受け取られると、登録した結果すべてに <a class="reference internal" href="#unittest.TestResult.stop" title="unittest.TestResult.stop"><code class="xref py py-meth docutils literal"><span class="pre">stop()</span></code></a> が呼び出されます。</p>
</dd></dl>

<dl class="function">
<dt id="unittest.registerResult">
<code class="descclassname">unittest.</code><code class="descname">registerResult</code><span class="sig-paren">(</span><em>result</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.registerResult" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>control-c 処理のために <a class="reference internal" href="#unittest.TestResult" title="unittest.TestResult"><code class="xref py py-class docutils literal"><span class="pre">TestResult</span></code></a> を登録します。結果を登録するとそれに対する弱参照が格納されるので、結果がガベージコレクトされるのを妨げません。</p>
<p>control-c 処理が有効でなければ、 <a class="reference internal" href="#unittest.TestResult" title="unittest.TestResult"><code class="xref py py-class docutils literal"><span class="pre">TestResult</span></code></a> オブジェクトの登録には副作用がありません。ですからテストフレームワークは、処理が有効か無効かにかかわらず、作成する全ての結果を無条件に登録できます。</p>
</dd></dl>

<dl class="function">
<dt id="unittest.removeResult">
<code class="descclassname">unittest.</code><code class="descname">removeResult</code><span class="sig-paren">(</span><em>result</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.removeResult" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>登録された結果を削除します。一旦結果が削除されると、control-c が押された際にその結果オブジェクトに対して <a class="reference internal" href="#unittest.TestResult.stop" title="unittest.TestResult.stop"><code class="xref py py-meth docutils literal"><span class="pre">stop()</span></code></a> が呼び出されなくなります。</p>
</dd></dl>

<dl class="function">
<dt id="unittest.removeHandler">
<code class="descclassname">unittest.</code><code class="descname">removeHandler</code><span class="sig-paren">(</span><em>function=None</em><span class="sig-paren">)</span><a class="headerlink" href="#unittest.removeHandler" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>引数なしで呼び出されたとき、control-c ハンドラがインストールされていると、この関数はそれを取り除きます。この関数は、テストが実行されている間だけ一時的にハンドラを取り除くテストデコレータとしても使えます:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="nd">@unittest</span><span class="o">.</span><span class="n">removeHandler</span>
<span class="k">def</span> <span class="nf">test_signal_handling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">26.4. <code class="docutils literal"><span class="pre">unittest</span></code> &#8212; ユニットテストフレームワーク</a><ul>
<li><a class="reference internal" href="#basic-example">26.4.1. 基本的な例</a></li>
<li><a class="reference internal" href="#command-line-interface">26.4.2. コマンドラインインターフェイス</a><ul>
<li><a class="reference internal" href="#command-line-options">26.4.2.1. コマンドラインオプション</a></li>
</ul>
</li>
<li><a class="reference internal" href="#test-discovery">26.4.3. テストディスカバリ</a></li>
<li><a class="reference internal" href="#organizing-test-code">26.4.4. テストコードの構成</a></li>
<li><a class="reference internal" href="#re-using-old-test-code">26.4.5. 既存テストコードの再利用</a></li>
<li><a class="reference internal" href="#skipping-tests-and-expected-failures">26.4.6. テストのスキップと予期された失敗</a></li>
<li><a class="reference internal" href="#distinguishing-test-iterations-using-subtests">26.4.7. サブテストを利用して繰り返しテストの区別を付ける</a></li>
<li><a class="reference internal" href="#classes-and-functions">26.4.8. クラスと関数</a><ul>
<li><a class="reference internal" href="#test-cases">26.4.8.1. テストクラス</a><ul>
<li><a class="reference internal" href="#deprecated-aliases">26.4.8.1.1. 非推奨のエイリアス</a></li>
</ul>
</li>
<li><a class="reference internal" href="#grouping-tests">26.4.8.2. テストのグループ化</a></li>
<li><a class="reference internal" href="#loading-and-running-tests">26.4.8.3. テストのロードと起動</a><ul>
<li><a class="reference internal" href="#load-tests-protocol">26.4.8.3.1. load_tests プロトコル</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#class-and-module-fixtures">26.4.9. クラスとモジュールのフィクスチャ</a><ul>
<li><a class="reference internal" href="#setupclass-and-teardownclass">26.4.9.1. setUpClass と tearDownClass</a></li>
<li><a class="reference internal" href="#setupmodule-and-teardownmodule">26.4.9.2. setUpModule と tearDownModule</a></li>
</ul>
</li>
<li><a class="reference internal" href="#signal-handling">26.4.10. シグナルハンドリング</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="doctest.html"
                        title="前の章へ">26.3. <code class="docutils literal"><span class="pre">doctest</span></code> &#8212; 対話的な実行例をテストする</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="unittest.mock.html"
                        title="次の章へ">26.5. <code class="docutils literal"><span class="pre">unittest.mock</span></code> &#8212; モックオブジェクトライブラリ</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">バグ報告</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.6/Doc/library/unittest.rst"
            rel="nofollow">ソースの表示
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="unittest.mock.html" title="26.5. unittest.mock — モックオブジェクトライブラリ"
             >次へ</a> |</li>
        <li class="right" >
          <a href="doctest.html" title="26.3. doctest — 対話的な実行例をテストする"
             >前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="https://www.python.org/">Python</a> &#187;</li>
        <li>
          <span class="version_switcher_placeholder">3.6.1</span>
          <a href="../index.html">ドキュメント</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 標準ライブラリ</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="development.html" >26. 開発ツール</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2017, Python Software Foundation.
    <br />
    Python Software Foundation は非営利団体です。
    <a href="https://www.python.org/psf/donations/">寄付</a>
    <br />
    最終更新日時: 4月 22, 2017
    <a href="../bugs.html">バグを見つけたら</a>?
    <br />
    このドキュメントは <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.9 を使って作成されました。
    </div>

  </body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>23.2. locale — 国際化サービス &#8212; Python 3.6.5 ドキュメント</title>
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.6.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Python 3.6.5 ドキュメント 内を検索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="24. プログラムのフレームワーク" href="frameworks.html" />
    <link rel="prev" title="23.1. gettext — 多言語対応に関する国際化サービス" href="gettext.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    <link rel="canonical" href="https://docs.python.jp/3/library/locale.html" /><script type="text/javascript">
    $(document).ready(function() {
      var base = 'https://docs.python.org/3.6/library/locale.html';
      $('a.headerlink').each(function() {
        var html = '<a href="' + base + $(this).attr('href') +
                   '" title="原文へのリンク"><small>(原文)</small></a>';
        $(this).after(html);
      })
    });
    </script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../_static/version_switch.js"></script>
    
    
 

  </head>
  <body>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="frameworks.html" title="24. プログラムのフレームワーク"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="gettext.html" title="23.1. gettext — 多言語対応に関する国際化サービス"
             accesskey="P">前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="https://www.python.org/">Python</a> &#187;</li>
        <li>
          <span class="version_switcher_placeholder">3.6.5</span>
          <a href="../index.html">ドキュメント</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 標準ライブラリ</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="i18n.html" accesskey="U">23. 国際化</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-locale">
<span id="locale-internationalization-services"></span><h1>23.2. <a class="reference internal" href="#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal"><span class="pre">locale</span></code></a> — 国際化サービス<a class="headerlink" href="#module-locale" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p><strong>ソースコード:</strong> <a class="reference external" href="https://github.com/python/cpython/tree/3.6/Lib/locale.py">Lib/locale.py</a></p>
<hr class="docutils" />
<p><a class="reference internal" href="#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal"><span class="pre">locale</span></code></a> モジュールは POSIX ロケールデータベースおよびロケール関連機能へのアクセスを提供します。 POSIX ロケール機構を使うことで、プログラマはソフトウェアが実行される各国における詳細を知らなくても、アプリケーション上で特定の地域文化に関係する部分を扱うことができます。</p>
<p id="index-0"><a class="reference internal" href="#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal"><span class="pre">locale</span></code></a> モジュールは、 <code class="xref py py-mod docutils literal"><span class="pre">_locale</span></code> を被うように実装されており、ANSI C ロケール実装を使っている <code class="xref py py-mod docutils literal"><span class="pre">_locale</span></code> が利用可能なら、こちらを先に使うようになっています。</p>
<p><a class="reference internal" href="#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal"><span class="pre">locale</span></code></a> モジュールでは以下の例外と関数を定義しています:</p>
<dl class="exception">
<dt id="locale.Error">
<em class="property">exception </em><code class="descclassname">locale.</code><code class="descname">Error</code><a class="headerlink" href="#locale.Error" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#locale.setlocale" title="locale.setlocale"><code class="xref py py-func docutils literal"><span class="pre">setlocale()</span></code></a> に渡されたロケールが認識されない場合例外が送出されます。</p>
</dd></dl>

<dl class="function">
<dt id="locale.setlocale">
<code class="descclassname">locale.</code><code class="descname">setlocale</code><span class="sig-paren">(</span><em>category</em>, <em>locale=None</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.setlocale" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>locale</em> が渡され <code class="docutils literal"><span class="pre">None</span></code> でない場合、<a class="reference internal" href="#locale.setlocale" title="locale.setlocale"><code class="xref py py-func docutils literal"><span class="pre">setlocale()</span></code></a> は <em>category</em> のロケール設定を変更します。利用可能なカテゴリーは下記の表を参照してください。 <em>locale</em> は文字列か2つの文字列の iterable (言語コードと文字コード) です。iterale の場合 locale aliasing engine を用いてロケール名に変換されます。空の文字列はユーザのデフォルトの設定を指定します。ロケールの変更に失敗した場合 <a class="reference internal" href="#locale.Error" title="locale.Error"><code class="xref py py-exc docutils literal"><span class="pre">Error</span></code></a> が送出されます。成功した場合新しいロケールの設定が返されます。</p>
<p><em>locale</em> が省略されたり <code class="docutils literal"><span class="pre">None</span></code> の場合、<em>category</em> の現在の設定が返されます。</p>
<p><a class="reference internal" href="#locale.setlocale" title="locale.setlocale"><code class="xref py py-func docutils literal"><span class="pre">setlocale()</span></code></a> はほとんどのシステムでスレッド安全ではありません。アプリケーションを書くとき、大抵は以下のコード</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">locale</span>
<span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>から書き始めます。これは全てのカテゴリをユーザの環境における標準設定 (大抵は環境変数 <span class="target" id="index-12"></span><code class="xref std std-envvar docutils literal"><span class="pre">LANG</span></code> で指定されています) に設定します。その後複数スレッドを使ってロケールを変更したりしない限り、問題は起こらないはずです。</p>
</dd></dl>

<dl class="function">
<dt id="locale.localeconv">
<code class="descclassname">locale.</code><code class="descname">localeconv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#locale.localeconv" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>地域的な慣行のデータベースを辞書として返します。辞書は以下の文字列をキーとして持っています:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="41%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">カテゴリ</th>
<th class="head">キー</th>
<th class="head">意味</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#locale.LC_NUMERIC" title="locale.LC_NUMERIC"><code class="xref py py-const docutils literal"><span class="pre">LC_NUMERIC</span></code></a></td>
<td><code class="docutils literal"><span class="pre">'decimal_point'</span></code></td>
<td>小数点を表す文字です。</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><code class="docutils literal"><span class="pre">'grouping'</span></code></td>
<td><code class="docutils literal"><span class="pre">'thousands_sep'</span></code> が来るかもしれない場所を相対的に表した数からなる配列です。配列が <a class="reference internal" href="#locale.CHAR_MAX" title="locale.CHAR_MAX"><code class="xref py py-const docutils literal"><span class="pre">CHAR_MAX</span></code></a> で終端されている場合、それ以上の桁では桁数字のグループ化を行いません。配列が <code class="docutils literal"><span class="pre">0</span></code> で終端されている場合、最後に指定したグループが反復的に使われます。</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><code class="docutils literal"><span class="pre">'thousands_sep'</span></code></td>
<td>桁グループ間を区切るために使われる文字です。</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#locale.LC_MONETARY" title="locale.LC_MONETARY"><code class="xref py py-const docutils literal"><span class="pre">LC_MONETARY</span></code></a></td>
<td><code class="docutils literal"><span class="pre">'int_curr_symbol'</span></code></td>
<td>国際通貨を表現する記号です。</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><code class="docutils literal"><span class="pre">'currency_symbol'</span></code></td>
<td>地域的な通貨を表現する記号です。</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><code class="docutils literal"><span class="pre">'p_cs_precedes/n_cs_precedes'</span></code></td>
<td>通貨記号が値の前につくかどうかです (それぞれ正の値、負の値を表します)。</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><code class="docutils literal"><span class="pre">'p_sep_by_space/n_sep_by_space'</span></code></td>
<td>通貨記号と値との間にスペースを入れるかどうかです (それぞれ正の値、負の値を表します)。</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><code class="docutils literal"><span class="pre">'mon_decimal_point'</span></code></td>
<td>金額表示の際に使われる小数点です。</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><code class="docutils literal"><span class="pre">'frac_digits'</span></code></td>
<td>金額を地域的な方法で表現する際の小数点以下の桁数です。</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><code class="docutils literal"><span class="pre">'int_frac_digits'</span></code></td>
<td>金額を国際的な方法で表現する際の小数点以下の桁数です。</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><code class="docutils literal"><span class="pre">'mon_thousands_sep'</span></code></td>
<td>金額表示の際に桁区切り記号です。</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><code class="docutils literal"><span class="pre">'mon_grouping'</span></code></td>
<td><code class="docutils literal"><span class="pre">'grouping'</span></code> と同じで、金額表示の際に使われます。</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><code class="docutils literal"><span class="pre">'positive_sign'</span></code></td>
<td>正の値の金額表示に使われる記号です。</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><code class="docutils literal"><span class="pre">'negative_sign'</span></code></td>
<td>負の値の金額表示に使われる記号です。</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><code class="docutils literal"><span class="pre">'p_sign_posn/n_sign_posn'</span></code></td>
<td>符号の位置です (それぞれ正の値と負の値を表します)。以下を参照してください。</td>
</tr>
</tbody>
</table>
<p>数値形式の値に <a class="reference internal" href="#locale.CHAR_MAX" title="locale.CHAR_MAX"><code class="xref py py-const docutils literal"><span class="pre">CHAR_MAX</span></code></a> を設定すると、そのロケールでは値が指定されていないことを表します。</p>
<p><code class="docutils literal"><span class="pre">'p_sign_posn'</span></code> および <code class="docutils literal"><span class="pre">'n_sign_posn'</span></code> の取り得る値は以下の通りです。</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">値</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">0</span></code></td>
<td>通貨記号および値は丸括弧で囲われます。</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">1</span></code></td>
<td>符号は値と通貨記号より前に来ます。</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">2</span></code></td>
<td>符号は値と通貨記号の後に続きます。</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">3</span></code></td>
<td>符号は値の直前に来ます。</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">4</span></code></td>
<td>符号は値の直後に来ます。</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">CHAR_MAX</span></code></td>
<td>このロケールでは特に指定しません。</td>
</tr>
</tbody>
</table>
<p>The function sets temporarily the <code class="docutils literal"><span class="pre">LC_CTYPE</span></code> locale to the <code class="docutils literal"><span class="pre">LC_NUMERIC</span></code>
locale to decode <code class="docutils literal"><span class="pre">decimal_point</span></code> and <code class="docutils literal"><span class="pre">thousands_sep</span></code> byte strings if
they are non-ASCII or longer than 1 byte, and the <code class="docutils literal"><span class="pre">LC_NUMERIC</span></code> locale is
different than the <code class="docutils literal"><span class="pre">LC_CTYPE</span></code> locale. This temporary change affects other
threads.</p>
<div class="versionchanged">
<p><span class="versionmodified">バージョン 3.6.5 で変更: </span>The function now sets temporarily the <code class="docutils literal"><span class="pre">LC_CTYPE</span></code> locale to the
<code class="docutils literal"><span class="pre">LC_NUMERIC</span></code> locale in some cases.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="locale.nl_langinfo">
<code class="descclassname">locale.</code><code class="descname">nl_langinfo</code><span class="sig-paren">(</span><em>option</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.nl_langinfo" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>ロケール特有の情報を文字列として返します。この関数は全てのシステムで利用可能なわけではなく、指定できる <em>option</em> もプラットフォーム間で大きく異なります。引数として使えるのは、locale モジュールで利用可能なシンボル定数を表す数字です。</p>
<p>関数 <a class="reference internal" href="#locale.nl_langinfo" title="locale.nl_langinfo"><code class="xref py py-func docutils literal"><span class="pre">nl_langinfo()</span></code></a> は以下のキーのうち一つを受理します。ほとんどの記述は GNU C ライブラリ中の対応する説明から引用されています。</p>
<dl class="data">
<dt id="locale.CODESET">
<code class="descclassname">locale.</code><code class="descname">CODESET</code><a class="headerlink" href="#locale.CODESET" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>選択されたロケールで用いられている文字エンコーディングの名前を文字列で取得します。</p>
</dd></dl>

<dl class="data">
<dt id="locale.D_T_FMT">
<code class="descclassname">locale.</code><code class="descname">D_T_FMT</code><a class="headerlink" href="#locale.D_T_FMT" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>日付と時刻をロケール特有の方法で表現するために、 <a class="reference internal" href="time.html#time.strftime" title="time.strftime"><code class="xref py py-func docutils literal"><span class="pre">time.strftime()</span></code></a> の書式文字列として用いることのできる文字列を取得します。</p>
</dd></dl>

<dl class="data">
<dt id="locale.D_FMT">
<code class="descclassname">locale.</code><code class="descname">D_FMT</code><a class="headerlink" href="#locale.D_FMT" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>日付をロケール特有の方法で表現するために、 <a class="reference internal" href="time.html#time.strftime" title="time.strftime"><code class="xref py py-func docutils literal"><span class="pre">time.strftime()</span></code></a> の書式文字列として用いることのできる文字列を取得します。</p>
</dd></dl>

<dl class="data">
<dt id="locale.T_FMT">
<code class="descclassname">locale.</code><code class="descname">T_FMT</code><a class="headerlink" href="#locale.T_FMT" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>時刻をロケール特有の方法で表現するために、 <a class="reference internal" href="time.html#time.strftime" title="time.strftime"><code class="xref py py-func docutils literal"><span class="pre">time.strftime()</span></code></a> の書式文字列として用いることのできる文字列を取得します。</p>
</dd></dl>

<dl class="data">
<dt id="locale.T_FMT_AMPM">
<code class="descclassname">locale.</code><code class="descname">T_FMT_AMPM</code><a class="headerlink" href="#locale.T_FMT_AMPM" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>時刻を午前／午後の書式で表現するために、 <a class="reference internal" href="time.html#time.strftime" title="time.strftime"><code class="xref py py-func docutils literal"><span class="pre">time.strftime()</span></code></a> の書式文字列として用いることのできる文字列を取得します。</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">DAY_1 ... DAY_7</code></dt>
<dd><p>1 週間中の n 番目の曜日名を取得します。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">ロケール US における、 <code class="xref py py-const docutils literal"><span class="pre">DAY_1</span></code> を日曜日とする慣行に従っています。国際的な (ISO 8601) 月曜日を週の初めとする慣行ではありません。</p>
</div>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">ABDAY_1 ... ABDAY_7</code></dt>
<dd><p>1 週間中の n 番目の曜日名を略式表記で取得します。</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">MON_1 ... MON_12</code></dt>
<dd><p>n 番目の月の名前を取得します。</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">ABMON_1 ... ABMON_12</code></dt>
<dd><p>n 番目の月の名前を略式表記で取得します。</p>
</dd></dl>

<dl class="data">
<dt id="locale.RADIXCHAR">
<code class="descclassname">locale.</code><code class="descname">RADIXCHAR</code><a class="headerlink" href="#locale.RADIXCHAR" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>基数点 (小数点ドット、あるいは小数点コンマ、等) を取得します。</p>
</dd></dl>

<dl class="data">
<dt id="locale.THOUSEP">
<code class="descclassname">locale.</code><code class="descname">THOUSEP</code><a class="headerlink" href="#locale.THOUSEP" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>1000 単位桁区切り (3 桁ごとのグループ化) の区切り文字を取得します。</p>
</dd></dl>

<dl class="data">
<dt id="locale.YESEXPR">
<code class="descclassname">locale.</code><code class="descname">YESEXPR</code><a class="headerlink" href="#locale.YESEXPR" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>肯定／否定で答える質問に対する肯定回答を正規表現関数で認識するために利用できる正規表現を取得します。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">表現は C ライブラリの <code class="xref c c-func docutils literal"><span class="pre">regex()</span></code> 関数に合ったものでなければならず、これは <a class="reference internal" href="re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal"><span class="pre">re</span></code></a> で使われている構文とは異なるかもしれません。</p>
</div>
</dd></dl>

<dl class="data">
<dt id="locale.NOEXPR">
<code class="descclassname">locale.</code><code class="descname">NOEXPR</code><a class="headerlink" href="#locale.NOEXPR" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>肯定／否定で答える質問に対する否定回答を正規表現関数で認識するために利用できる正規表現を取得します。</p>
</dd></dl>

<dl class="data">
<dt id="locale.CRNCYSTR">
<code class="descclassname">locale.</code><code class="descname">CRNCYSTR</code><a class="headerlink" href="#locale.CRNCYSTR" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>通貨シンボルを取得します。シンボルを値の前に表示させる場合には &quot;-&quot;、値の後ろに表示させる場合には &quot;+&quot;、シンボルを基数点と置き換える場合には &quot;.&quot; を前につけます。</p>
</dd></dl>

<dl class="data">
<dt id="locale.ERA">
<code class="descclassname">locale.</code><code class="descname">ERA</code><a class="headerlink" href="#locale.ERA" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>現在のロケールで使われている年代を表現する値を取得します。</p>
<p>ほとんどのロケールではこの値を定義していません。この値を設定しているロケールの例は Japanese です。日本には日付の伝統的な表示法として、時の天皇に対応する元号名があります。</p>
<p>通常この値を直接指定する必要はありません。 <code class="docutils literal"><span class="pre">E</span></code> を書式文字列に指定することで、関数 <a class="reference internal" href="time.html#time.strftime" title="time.strftime"><code class="xref py py-func docutils literal"><span class="pre">time.strftime()</span></code></a> がこの情報を使うようになります。返される文字列の様式は決められていないので、異なるシステム間で様式に関する同じ知識が使えると期待してはいけません。</p>
</dd></dl>

<dl class="data">
<dt id="locale.ERA_D_T_FMT">
<code class="descclassname">locale.</code><code class="descname">ERA_D_T_FMT</code><a class="headerlink" href="#locale.ERA_D_T_FMT" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>日付および時間をロケール固有の年代に基づいた方法で表現するために、 <a class="reference internal" href="time.html#time.strftime" title="time.strftime"><code class="xref py py-func docutils literal"><span class="pre">time.strftime()</span></code></a> の書式文字列として用いることのできる文字列を取得します。</p>
</dd></dl>

<dl class="data">
<dt id="locale.ERA_D_FMT">
<code class="descclassname">locale.</code><code class="descname">ERA_D_FMT</code><a class="headerlink" href="#locale.ERA_D_FMT" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>日付をロケール固有の年代に基づいた方法で表現するために、 <a class="reference internal" href="time.html#time.strftime" title="time.strftime"><code class="xref py py-func docutils literal"><span class="pre">time.strftime()</span></code></a> の書式文字列として用いることのできる文字列を取得します。</p>
</dd></dl>

<dl class="data">
<dt id="locale.ERA_T_FMT">
<code class="descclassname">locale.</code><code class="descname">ERA_T_FMT</code><a class="headerlink" href="#locale.ERA_T_FMT" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>時刻をロケール固有の年代に基づいた方法で表現するために、 <a class="reference internal" href="time.html#time.strftime" title="time.strftime"><code class="xref py py-func docutils literal"><span class="pre">time.strftime()</span></code></a> の書式文字列として用いることのできる文字列を取得します。</p>
</dd></dl>

<dl class="data">
<dt id="locale.ALT_DIGITS">
<code class="descclassname">locale.</code><code class="descname">ALT_DIGITS</code><a class="headerlink" href="#locale.ALT_DIGITS" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>返される値は 0 から 99 までの 100 個の値の表現です。</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="locale.getdefaultlocale">
<code class="descclassname">locale.</code><code class="descname">getdefaultlocale</code><span class="sig-paren">(</span><span class="optional">[</span><em>envvars</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#locale.getdefaultlocale" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>標準のロケール設定を取得しようと試み、結果をタプル <code class="docutils literal"><span class="pre">(language</span> <span class="pre">code,</span> <span class="pre">encoding)</span></code> の形式で返します。</p>
<p>POSIXによると、 <code class="docutils literal"><span class="pre">setlocale(LC_ALL,</span> <span class="pre">'')</span></code> を呼ばなかったプログラムは、移植可能な <code class="docutils literal"><span class="pre">'C'</span></code> ロケール設定を使います。 <code class="docutils literal"><span class="pre">setlocale(LC_ALL,</span> <span class="pre">'')</span></code> を呼ぶことで、 <span class="target" id="index-13"></span><code class="xref std std-envvar docutils literal"><span class="pre">LANG</span></code> 変数で定義された標準のロケール設定を使うようになります。 Python では現在のロケール設定に干渉したくないので、上で述べたような方法でその挙動をエミュレーションしています。</p>
<p>他のプラットフォームとの互換性を維持するために、環境変数 <span class="target" id="index-14"></span><code class="xref std std-envvar docutils literal"><span class="pre">LANG</span></code> だけでなく、引数 <em>envvars</em> で指定された環境変数のリストも調べられます。最初に見つかった定義が使われます。 <em>envvars</em> は標準では GNU gettext で使われている検索順になります; これは常に変数名 <code class="docutils literal"><span class="pre">LANG</span></code> を探します。GNU gettext では <code class="docutils literal"><span class="pre">'LC_ALL'</span></code> 、 <code class="docutils literal"><span class="pre">'LC_CTYPE'</span></code> 、 <code class="docutils literal"><span class="pre">'LANG'</span></code> 、および <code class="docutils literal"><span class="pre">'LANGUAGE'</span></code> の順に調べられます。</p>
<p><code class="docutils literal"><span class="pre">'C'</span></code> の場合を除き、言語コードは <span class="target" id="index-15"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc1766.html"><strong>RFC 1766</strong></a> に対応します。 <em>language code</em> および <em>encoding</em> が決定できなかった場合、 <code class="docutils literal"><span class="pre">None</span></code> になるかもしれません。</p>
</dd></dl>

<dl class="function">
<dt id="locale.getlocale">
<code class="descclassname">locale.</code><code class="descname">getlocale</code><span class="sig-paren">(</span><em>category=LC_CTYPE</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.getlocale" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>与えられたロケールカテゴリに対する現在の設定を、 <em>language code</em> 、 <em>encoding</em> を含むシーケンスで返します。 <em>category</em> として <a class="reference internal" href="#locale.LC_ALL" title="locale.LC_ALL"><code class="xref py py-const docutils literal"><span class="pre">LC_ALL</span></code></a> 以外の <code class="xref py py-const docutils literal"><span class="pre">LC_*</span></code> の値の一つを指定できます。標準の設定は <a class="reference internal" href="#locale.LC_CTYPE" title="locale.LC_CTYPE"><code class="xref py py-const docutils literal"><span class="pre">LC_CTYPE</span></code></a> です。</p>
<p><code class="docutils literal"><span class="pre">'C'</span></code> の場合を除き、言語コードは <span class="target" id="index-16"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc1766.html"><strong>RFC 1766</strong></a> に対応します。 <em>language code</em> および <em>encoding</em> が決定できなかった場合、 <code class="docutils literal"><span class="pre">None</span></code> になるかもしれません。</p>
</dd></dl>

<dl class="function">
<dt id="locale.getpreferredencoding">
<code class="descclassname">locale.</code><code class="descname">getpreferredencoding</code><span class="sig-paren">(</span><em>do_setlocale=True</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.getpreferredencoding" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>テキストデータをエンコードする方法を、ユーザの設定に基づいて返します。ユーザの設定は異なるシステム間では異なった方法で表現され、システムによってはプログラミング的に得ることができないこともあるので、この関数が返すのはただの推測です。</p>
<p>システムによっては、ユーザの設定を取得するために <a class="reference internal" href="#locale.setlocale" title="locale.setlocale"><code class="xref py py-func docutils literal"><span class="pre">setlocale()</span></code></a> を呼び出す必要があるため、この関数はスレッド安全ではありません。 <a class="reference internal" href="#locale.setlocale" title="locale.setlocale"><code class="xref py py-func docutils literal"><span class="pre">setlocale()</span></code></a> を呼び出す必要がない、または呼び出したくない場合、 <em>do_setlocale</em> を <code class="docutils literal"><span class="pre">False</span></code> に設定する必要があります。</p>
</dd></dl>

<dl class="function">
<dt id="locale.normalize">
<code class="descclassname">locale.</code><code class="descname">normalize</code><span class="sig-paren">(</span><em>localename</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.normalize" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>与えたロケール名を規格化したロケールコードを返します。返されるロケールコードは <a class="reference internal" href="#locale.setlocale" title="locale.setlocale"><code class="xref py py-func docutils literal"><span class="pre">setlocale()</span></code></a> で使うために書式化されています。規格化が失敗した場合、もとの名前がそのまま返されます。</p>
<p>与えたエンコードがシステムにとって未知の場合、標準の設定では、この関数は <a class="reference internal" href="#locale.setlocale" title="locale.setlocale"><code class="xref py py-func docutils literal"><span class="pre">setlocale()</span></code></a> と同様に、エンコーディングをロケールコードにおける標準のエンコーディングに設定します。</p>
</dd></dl>

<dl class="function">
<dt id="locale.resetlocale">
<code class="descclassname">locale.</code><code class="descname">resetlocale</code><span class="sig-paren">(</span><em>category=LC_ALL</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.resetlocale" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><em>category</em> のロケールを標準設定にします。</p>
<p>標準設定は <a class="reference internal" href="#locale.getdefaultlocale" title="locale.getdefaultlocale"><code class="xref py py-func docutils literal"><span class="pre">getdefaultlocale()</span></code></a> を呼ぶことで決定されます。 <em>category</em> は標準で <a class="reference internal" href="#locale.LC_ALL" title="locale.LC_ALL"><code class="xref py py-const docutils literal"><span class="pre">LC_ALL</span></code></a> になっています。</p>
</dd></dl>

<dl class="function">
<dt id="locale.strcoll">
<code class="descclassname">locale.</code><code class="descname">strcoll</code><span class="sig-paren">(</span><em>string1</em>, <em>string2</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.strcoll" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>現在の <a class="reference internal" href="#locale.LC_COLLATE" title="locale.LC_COLLATE"><code class="xref py py-const docutils literal"><span class="pre">LC_COLLATE</span></code></a> 設定に従って二つの文字列を比較します。他の比較を行う関数と同じように、 <em>string1</em> が <em>string2</em> に対して前に来るか、後に来るか、あるいは二つが等しいかによって、それぞれ負の値、正の値、あるいは <code class="docutils literal"><span class="pre">0</span></code> を返します。</p>
</dd></dl>

<dl class="function">
<dt id="locale.strxfrm">
<code class="descclassname">locale.</code><code class="descname">strxfrm</code><span class="sig-paren">(</span><em>string</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.strxfrm" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>文字列を、ロケールを考慮した比較に使える形式に変換します。例えば、 <code class="docutils literal"><span class="pre">strxfrm(s1)</span> <span class="pre">&lt;</span> <span class="pre">strxfrm(s2)</span></code> は <code class="docutils literal"><span class="pre">strcoll(s1,</span> <span class="pre">s2)</span> <span class="pre">&lt;</span> <span class="pre">0</span></code> と等価です。この関数は同じ文字列が何度も比較される場合、例えば文字列からなるシーケンスを順序付けて並べる際に使うことができます。</p>
</dd></dl>

<dl class="function">
<dt id="locale.format">
<code class="descclassname">locale.</code><code class="descname">format</code><span class="sig-paren">(</span><em>format</em>, <em>val</em>, <em>grouping=False</em>, <em>monetary=False</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.format" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>数値 <em>val</em> を現在の <a class="reference internal" href="#locale.LC_NUMERIC" title="locale.LC_NUMERIC"><code class="xref py py-const docutils literal"><span class="pre">LC_NUMERIC</span></code></a> の設定に基づいて書式化します。書式は <code class="docutils literal"><span class="pre">%</span></code> 演算子の慣行に従います。浮動小数点数については、必要に応じて浮動小数点が変更されます。 <em>grouping</em> が真なら、ロケールに配慮した桁数の区切りが行われます。</p>
<p><em>monetary</em> が真なら、桁区切り記号やグループ化文字列を用いて変換を行います。</p>
<p>この関数や、1文字の指定子でしか動作しないことに注意しましょう。フォーマット文字列を使う場合は <a class="reference internal" href="#locale.format_string" title="locale.format_string"><code class="xref py py-func docutils literal"><span class="pre">format_string()</span></code></a> を使用します。</p>
</dd></dl>

<dl class="function">
<dt id="locale.format_string">
<code class="descclassname">locale.</code><code class="descname">format_string</code><span class="sig-paren">(</span><em>format</em>, <em>val</em>, <em>grouping=False</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.format_string" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">format</span> <span class="pre">%</span> <span class="pre">val</span></code> 形式のフォーマット指定子を、現在のロケール設定を考慮したうえで処理します。</p>
</dd></dl>

<dl class="function">
<dt id="locale.currency">
<code class="descclassname">locale.</code><code class="descname">currency</code><span class="sig-paren">(</span><em>val</em>, <em>symbol=True</em>, <em>grouping=False</em>, <em>international=False</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.currency" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>数値 <em>val</em> を、現在の <a class="reference internal" href="#locale.LC_MONETARY" title="locale.LC_MONETARY"><code class="xref py py-const docutils literal"><span class="pre">LC_MONETARY</span></code></a> の設定にあわせてフォーマットします。</p>
<p><em>symbol</em> が真の場合は、返される文字列に通貨記号が含まれるようになります。これはデフォルトの設定です。<em>grouping</em> が真の場合(これはデフォルトではありません)は、値をグループ化します。<em>international</em> が真の場合(これはデフォルトではありません)は、国際的な通貨記号を使用します。</p>
<p>この関数は’C’ロケールでは動作しないことに注意しましょう。まず最初に <a class="reference internal" href="#locale.setlocale" title="locale.setlocale"><code class="xref py py-func docutils literal"><span class="pre">setlocale()</span></code></a> でロケールを設定する必要があります。</p>
</dd></dl>

<dl class="function">
<dt id="locale.str">
<code class="descclassname">locale.</code><code class="descname">str</code><span class="sig-paren">(</span><em>float</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.str" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>浮動小数点数を <code class="docutils literal"><span class="pre">str(float)</span></code> と同じように書式化しますが、ロケールに配慮した小数点が使われます。</p>
</dd></dl>

<dl class="function">
<dt id="locale.delocalize">
<code class="descclassname">locale.</code><code class="descname">delocalize</code><span class="sig-paren">(</span><em>string</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.delocalize" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>文字列を <a class="reference internal" href="#locale.LC_NUMERIC" title="locale.LC_NUMERIC"><code class="xref py py-const docutils literal"><span class="pre">LC_NUMERIC</span></code></a> で設定された慣行に従って正規化された数値文字列に変換します。</p>
<div class="versionadded">
<p><span class="versionmodified">バージョン 3.5 で追加.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="locale.atof">
<code class="descclassname">locale.</code><code class="descname">atof</code><span class="sig-paren">(</span><em>string</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.atof" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>文字列を <a class="reference internal" href="#locale.LC_NUMERIC" title="locale.LC_NUMERIC"><code class="xref py py-const docutils literal"><span class="pre">LC_NUMERIC</span></code></a> で設定された慣行に従って浮動小数点に変換します。</p>
</dd></dl>

<dl class="function">
<dt id="locale.atoi">
<code class="descclassname">locale.</code><code class="descname">atoi</code><span class="sig-paren">(</span><em>string</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.atoi" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>文字列を <a class="reference internal" href="#locale.LC_NUMERIC" title="locale.LC_NUMERIC"><code class="xref py py-const docutils literal"><span class="pre">LC_NUMERIC</span></code></a> で設定された慣行に従って整数に変換します。</p>
</dd></dl>

<dl class="data">
<dt id="locale.LC_CTYPE">
<code class="descclassname">locale.</code><code class="descname">LC_CTYPE</code><a class="headerlink" href="#locale.LC_CTYPE" title="この定義へのパーマリンク">¶</a></dt>
<dd><p id="index-6">文字タイプ関連の関数のためのロケールカテゴリです。このカテゴリの設定に従って、モジュール <a class="reference internal" href="string.html#module-string" title="string: Common string operations."><code class="xref py py-mod docutils literal"><span class="pre">string</span></code></a> における関数の振る舞いが変わります。</p>
</dd></dl>

<dl class="data">
<dt id="locale.LC_COLLATE">
<code class="descclassname">locale.</code><code class="descname">LC_COLLATE</code><a class="headerlink" href="#locale.LC_COLLATE" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>文字列を並べ替えるためのロケールカテゴリです。 <a class="reference internal" href="#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal"><span class="pre">locale</span></code></a> モジュールの関数 <a class="reference internal" href="#locale.strcoll" title="locale.strcoll"><code class="xref py py-func docutils literal"><span class="pre">strcoll()</span></code></a> および <a class="reference internal" href="#locale.strxfrm" title="locale.strxfrm"><code class="xref py py-func docutils literal"><span class="pre">strxfrm()</span></code></a> が影響を受けます。</p>
</dd></dl>

<dl class="data">
<dt id="locale.LC_TIME">
<code class="descclassname">locale.</code><code class="descname">LC_TIME</code><a class="headerlink" href="#locale.LC_TIME" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>時刻を書式化するためのロケールカテゴリです。 <a class="reference internal" href="time.html#time.strftime" title="time.strftime"><code class="xref py py-func docutils literal"><span class="pre">time.strftime()</span></code></a>  はこのカテゴリに設定されている慣行に従います。</p>
</dd></dl>

<dl class="data">
<dt id="locale.LC_MONETARY">
<code class="descclassname">locale.</code><code class="descname">LC_MONETARY</code><a class="headerlink" href="#locale.LC_MONETARY" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>金額に関係する値を書式化するためのロケールカテゴリです。設定可能なオプションは関数 <a class="reference internal" href="#locale.localeconv" title="locale.localeconv"><code class="xref py py-func docutils literal"><span class="pre">localeconv()</span></code></a> で得ることができます。</p>
</dd></dl>

<dl class="data">
<dt id="locale.LC_MESSAGES">
<code class="descclassname">locale.</code><code class="descname">LC_MESSAGES</code><a class="headerlink" href="#locale.LC_MESSAGES" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>メッセージ表示のためのロケールカテゴリです。現在 Python はアプリケーション毎にロケールに対応したメッセージを出力する機能はサポートしていません。 <a class="reference internal" href="os.html#os.strerror" title="os.strerror"><code class="xref py py-func docutils literal"><span class="pre">os.strerror()</span></code></a> が返すような、オペレーティングシステムによって表示されるメッセージはこのカテゴリによって影響を受けます。</p>
</dd></dl>

<dl class="data">
<dt id="locale.LC_NUMERIC">
<code class="descclassname">locale.</code><code class="descname">LC_NUMERIC</code><a class="headerlink" href="#locale.LC_NUMERIC" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>数字を書式化するためのロケールカテゴリです。関数 <a class="reference internal" href="#locale.format" title="locale.format"><code class="xref py py-func docutils literal"><span class="pre">format()</span></code></a> 、 <a class="reference internal" href="#locale.atoi" title="locale.atoi"><code class="xref py py-func docutils literal"><span class="pre">atoi()</span></code></a> 、 <a class="reference internal" href="#locale.atof" title="locale.atof"><code class="xref py py-func docutils literal"><span class="pre">atof()</span></code></a> および <a class="reference internal" href="#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal"><span class="pre">locale</span></code></a> モジュールの <a class="reference internal" href="#locale.str" title="locale.str"><code class="xref py py-func docutils literal"><span class="pre">str()</span></code></a> が影響を受けます。他の数値書式化操作は影響を受けません。</p>
</dd></dl>

<dl class="data">
<dt id="locale.LC_ALL">
<code class="descclassname">locale.</code><code class="descname">LC_ALL</code><a class="headerlink" href="#locale.LC_ALL" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>全てのロケール設定を総合したものです。ロケールを変更する際にこのフラグが使われた場合、そのロケールにおける全てのカテゴリを設定しようと試みます。一つでも失敗したカテゴリがあった場合、全てのカテゴリにおいて設定変更を行いません。このフラグを使ってロケールを取得した場合、全てのカテゴリにおける設定を示す文字列が返されます。この文字列は、後に設定を元に戻すために使うことができます。</p>
</dd></dl>

<dl class="data">
<dt id="locale.CHAR_MAX">
<code class="descclassname">locale.</code><code class="descname">CHAR_MAX</code><a class="headerlink" href="#locale.CHAR_MAX" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#locale.localeconv" title="locale.localeconv"><code class="xref py py-func docutils literal"><span class="pre">localeconv()</span></code></a> の返す特別な値のためのシンボル定数です。</p>
</dd></dl>

<p>以下はプログラム例です:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">locale</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loc</span> <span class="o">=</span> <span class="n">locale</span><span class="o">.</span><span class="n">getlocale</span><span class="p">()</span>  <span class="c1"># get current locale</span>
<span class="go"># use German locale; name might vary with platform</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s1">&#39;de_DE&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">locale</span><span class="o">.</span><span class="n">strcoll</span><span class="p">(</span><span class="s1">&#39;f</span><span class="se">\xe4</span><span class="s1">n&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>  <span class="c1"># compare a string containing an umlaut</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>   <span class="c1"># use user&#39;s preferred locale</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)</span>  <span class="c1"># use default (C) locale</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>  <span class="c1"># restore saved locale</span>
</pre></div>
</div>
<div class="section" id="background-details-hints-tips-and-caveats">
<h2>23.2.1. ロケールの背景、詳細、ヒント、助言および補足説明<a class="headerlink" href="#background-details-hints-tips-and-caveats" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>C 標準では、ロケールはプログラム全体にわたる特性であり、その変更は高価な処理であるとしています。加えて、頻繁にロケールを変更するようなひどい実装はコアダンプを引き起こすこともあります。このことがロケールを正しく利用する上で苦痛となっています。</p>
<p>最初、プログラムが起動したときには、ユーザの希望するロケールにかかわらずロケールは <code class="docutils literal"><span class="pre">C</span></code> です。例外が1つあります: <a class="reference internal" href="#locale.LC_CTYPE" title="locale.LC_CTYPE"><code class="xref py py-data docutils literal"><span class="pre">LC_CTYPE</span></code></a> カテゴリは、現在のロケールエンコーディングをユーザーの希望するロケールエンコーディングに設定するために、スタートアップで変更されます。他のカテゴリについては、プログラムは <code class="docutils literal"><span class="pre">setlocale(LC_ALL,</span> <span class="pre">'')</span></code> を呼び出して、明示的にユーザの希望するロケール設定を行わなければなりません。</p>
<p><a class="reference internal" href="#locale.setlocale" title="locale.setlocale"><code class="xref py py-func docutils literal"><span class="pre">setlocale()</span></code></a> をライブラリルーチン内で呼ぶことは、それがプログラム全体に及ぼす副作用の面から、一般的によくない考えです。ロケールを保存したり復帰したりするのもよくありません: 高価な処理であり、ロケールの設定が復帰する以前に起動してしまった他のスレッドに悪影響を及ぼすからです。</p>
<p>もし、汎用を目的としたモジュールを作っていて、ロケールによって影響をうけるような操作 (例えば <a class="reference internal" href="time.html#time.strftime" title="time.strftime"><code class="xref py py-func docutils literal"><span class="pre">time.strftime()</span></code></a> の書式の一部) のロケール独立のバージョンが必要ということになれば、標準ライブラリルーチンを使わずに何とかしなければなりません。よりましな方法は、ロケール設定が正しく利用できているか確かめることです。最後の手段は、あなたのモジュールが <code class="docutils literal"><span class="pre">C</span></code> ロケール以外の設定には互換性がないとドキュメントに書くことです。</p>
<p>ロケールに従って数値操作を行うための唯一の方法はこのモジュールで特別に定義されている関数: <a class="reference internal" href="#locale.atof" title="locale.atof"><code class="xref py py-func docutils literal"><span class="pre">atof()</span></code></a> 、 <a class="reference internal" href="#locale.atoi" title="locale.atoi"><code class="xref py py-func docutils literal"><span class="pre">atoi()</span></code></a> 、 <a class="reference internal" href="#locale.format" title="locale.format"><code class="xref py py-func docutils literal"><span class="pre">format()</span></code></a> 、 <a class="reference internal" href="#locale.str" title="locale.str"><code class="xref py py-func docutils literal"><span class="pre">str()</span></code></a> を使うことです。</p>
<p>ロケールに従ってケース変換や文字分類を行う方法はありません。 (ユニコード) テキスト文字列については、これらは文字の値のみによって行われます。その一方、バイト文字列はバイトの ASCII 値に従って変換と分類が行われます。そして、上位ビットが立っているバイト (すなわち、non-ASCII バイト) は、決して変換されず、英字や空白などの文字クラスの一部とみなされることもありません。</p>
</div>
<div class="section" id="for-extension-writers-and-programs-that-embed-python">
<span id="embedding-locale"></span><h2>23.2.2. Python 拡張の作者と、Python を埋め込むようなプログラムに関して<a class="headerlink" href="#for-extension-writers-and-programs-that-embed-python" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>拡張モジュールは、現在のロケールを調べる以外は、決して <a class="reference internal" href="#locale.setlocale" title="locale.setlocale"><code class="xref py py-func docutils literal"><span class="pre">setlocale()</span></code></a> を呼び出してはなりません。しかし、返される値もロケールの復帰のために使えるだけなので、さほど便利とはいえません (例外はおそらくロケールが <code class="docutils literal"><span class="pre">C</span></code> かどうか調べることでしょう)。</p>
<p>ロケールを変更するために Python コードで <a class="reference internal" href="#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal"><span class="pre">locale</span></code></a> モジュールを使った場合、Python を埋め込んでいるアプリケーションにも影響を及ぼします。Python を埋め込んでいるアプリケーションに影響が及ぶことを望まない場合、 <code class="file docutils literal"><span class="pre">config.c</span></code> ファイル内の組み込みモジュールのテーブルから <code class="xref py py-mod docutils literal"><span class="pre">_locale</span></code> 拡張モジュール  (ここで全てを行っています)  を削除し、共有ライブラリから <code class="xref py py-mod docutils literal"><span class="pre">_locale</span></code> モジュールにアクセスできないようにしてください。</p>
</div>
<div class="section" id="access-to-message-catalogs">
<span id="locale-gettext"></span><h2>23.2.3. メッセージカタログへのアクセス<a class="headerlink" href="#access-to-message-catalogs" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="function">
<dt id="locale.gettext">
<code class="descclassname">locale.</code><code class="descname">gettext</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.gettext" title="この定義へのパーマリンク">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="locale.dgettext">
<code class="descclassname">locale.</code><code class="descname">dgettext</code><span class="sig-paren">(</span><em>domain</em>, <em>msg</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.dgettext" title="この定義へのパーマリンク">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="locale.dcgettext">
<code class="descclassname">locale.</code><code class="descname">dcgettext</code><span class="sig-paren">(</span><em>domain</em>, <em>msg</em>, <em>category</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.dcgettext" title="この定義へのパーマリンク">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="locale.textdomain">
<code class="descclassname">locale.</code><code class="descname">textdomain</code><span class="sig-paren">(</span><em>domain</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.textdomain" title="この定義へのパーマリンク">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="locale.bindtextdomain">
<code class="descclassname">locale.</code><code class="descname">bindtextdomain</code><span class="sig-paren">(</span><em>domain</em>, <em>dir</em><span class="sig-paren">)</span><a class="headerlink" href="#locale.bindtextdomain" title="この定義へのパーマリンク">¶</a></dt>
<dd></dd></dl>

<p>The locale module exposes the C library’s gettext interface on systems that
provide this interface.  It consists of the functions <code class="xref py py-func docutils literal"><span class="pre">gettext()</span></code>,
<code class="xref py py-func docutils literal"><span class="pre">dgettext()</span></code>, <code class="xref py py-func docutils literal"><span class="pre">dcgettext()</span></code>, <code class="xref py py-func docutils literal"><span class="pre">textdomain()</span></code>, <code class="xref py py-func docutils literal"><span class="pre">bindtextdomain()</span></code>,
and <code class="xref py py-func docutils literal"><span class="pre">bind_textdomain_codeset()</span></code>.  These are similar to the same functions in
the <a class="reference internal" href="gettext.html#module-gettext" title="gettext: Multilingual internationalization services."><code class="xref py py-mod docutils literal"><span class="pre">gettext</span></code></a> module, but use the C library’s binary format for message
catalogs, and the C library’s search algorithms for locating message catalogs.</p>
<p>Python applications should normally find no need to invoke these functions, and
should use <a class="reference internal" href="gettext.html#module-gettext" title="gettext: Multilingual internationalization services."><code class="xref py py-mod docutils literal"><span class="pre">gettext</span></code></a> instead.  A known exception to this rule are
applications that link with additional C libraries which internally invoke
<code class="xref c c-func docutils literal"><span class="pre">gettext()</span></code> or <code class="xref c c-func docutils literal"><span class="pre">dcgettext()</span></code>.  For these applications, it may be
necessary to bind the text domain, so that the libraries can properly locate
their message catalogs.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">23.2. <code class="docutils literal"><span class="pre">locale</span></code> — 国際化サービス</a><ul>
<li><a class="reference internal" href="#background-details-hints-tips-and-caveats">23.2.1. ロケールの背景、詳細、ヒント、助言および補足説明</a></li>
<li><a class="reference internal" href="#for-extension-writers-and-programs-that-embed-python">23.2.2. Python 拡張の作者と、Python を埋め込むようなプログラムに関して</a></li>
<li><a class="reference internal" href="#access-to-message-catalogs">23.2.3. メッセージカタログへのアクセス</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="gettext.html"
                        title="前の章へ">23.1. <code class="docutils literal"><span class="pre">gettext</span></code> — 多言語対応に関する国際化サービス</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="frameworks.html"
                        title="次の章へ">24. プログラムのフレームワーク</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">バグ報告</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.6/Doc/library/locale.rst"
            rel="nofollow">ソースの表示
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="frameworks.html" title="24. プログラムのフレームワーク"
             >次へ</a> |</li>
        <li class="right" >
          <a href="gettext.html" title="23.1. gettext — 多言語対応に関する国際化サービス"
             >前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="https://www.python.org/">Python</a> &#187;</li>
        <li>
          <span class="version_switcher_placeholder">3.6.5</span>
          <a href="../index.html">ドキュメント</a> &#187;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 標準ライブラリ</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="i18n.html" >23. 国際化</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2018, Python Software Foundation.
    <br />
    Python Software Foundation は非営利団体です。
    <a href="https://www.python.org/psf/donations/">寄付</a>
    <br />
    最終更新日時: 6月 02, 2018
    <a href="../bugs.html">バグを見つけたら</a>?
    <br />
    このドキュメントは <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.5 を使って作成されました。
    </div>

  </body>
</html>